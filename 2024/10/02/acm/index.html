

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="0d-00">
  <meta name="keywords" content="">
  
    <meta name="description" content="1.ABC 364 F - Range Connect MSTProblem StatementThere is a graph with $N + Q$ vertices, numbered $1, 2, \ldots, N + Q$. Initially, the graph has no edges. For this graph, perform the following operati">
<meta property="og:type" content="article">
<meta property="og:title" content="acm1600">
<meta property="og:url" content="https://0d-00.github.io/2024/10/02/acm/index.html">
<meta property="og:site_name" content="0d-00&#39;s Blog">
<meta property="og:description" content="1.ABC 364 F - Range Connect MSTProblem StatementThere is a graph with $N + Q$ vertices, numbered $1, 2, \ldots, N + Q$. Initially, the graph has no edges. For this graph, perform the following operati">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-10-02T05:00:10.000Z">
<meta property="article:modified_time" content="2024-11-21T06:30:33.411Z">
<meta property="article:author" content="0d-00">
<meta property="article:tag" content="ACM">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>acm1600 - 0d-00&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"0d-00.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>0d-00</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="acm1600"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-10-02 13:00" pubdate>
          2024年10月2日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          3.8k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          32 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">acm1600</h1>
            
            
              <div class="markdown-body">
                
                <h2 id="1-ABC-364-F-Range-Connect-MST"><a href="#1-ABC-364-F-Range-Connect-MST" class="headerlink" title="1.ABC 364 F - Range Connect MST"></a>1.ABC 364 F - Range Connect MST</h2><h3 id="Problem-Statement"><a href="#Problem-Statement" class="headerlink" title="Problem Statement"></a>Problem Statement</h3><p>There is a graph with $N + Q$ vertices, numbered $1, 2, \ldots, N + Q$. Initially, the graph has no edges.</p>
<p>For this graph, perform the following operation for $i = 1, 2, \ldots, Q$ in order:</p>
<ul>
<li>For each integer $j$ satisfying $L_i \leq j \leq R_i$, add an undirected edge with cost $C_i$ between vertices $N + i$ and $j$.</li>
</ul>
<p>Determine if the graph is connected after all operations are completed. If it is connected, find the cost of a minimum spanning tree of the graph.</p>
<p>A minimum spanning tree is a spanning tree with the smallest possible cost, and the cost of a spanning tree is the sum of the costs of the edges used in the spanning tree.</p>
<h3 id="Constraints"><a href="#Constraints" class="headerlink" title="Constraints"></a>Constraints</h3><ul>
<li>$1 \leq N, Q \leq 2 \times 10^5$</li>
<li>$1 \leq L_i \leq R_i \leq N$</li>
<li>$1 \leq C_i \leq 10^9$</li>
<li>All input values are integers.</li>
</ul>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>首先容易想到按边权排序。我们默认每一次操作至少添加一次，那么我们可以将$N+1\sim N+Q$看成已经联通，我们可以初始状态看成$N+1$个连通块，目标是使最后只剩下一个联通块。而对于具体的一次操作我们显然需要连接范围内所有联通块。</p>
<h4 id="利用set"><a href="#利用set" class="headerlink" title="利用set"></a>利用set</h4><p>注意到每一个连通块连接的点是连续的。我们用set储存每个连通块最小的点的编号，每次操作可以二分快速找到连通块数量。具体细节看代码。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span> &#123;<br>  <span class="hljs-type">int</span> l, r, c;<br>  <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-type">const</span> node&amp; u) <span class="hljs-type">const</span> &#123; <span class="hljs-keyword">return</span> c &lt; u.c; &#125;<br>&#125; a[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n, q;<br>  cin &gt;&gt; n &gt;&gt; q;<br>  set&lt;<span class="hljs-type">int</span>&gt; st;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) st.<span class="hljs-built_in">insert</span>(i);<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= q; ++i) cin &gt;&gt; a[i].l &gt;&gt; a[i].r &gt;&gt; a[i].c;<br>  <span class="hljs-built_in">sort</span>(a + <span class="hljs-number">1</span>, a + <span class="hljs-number">1</span> + q);<br>  ll ans = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= q; ++i) &#123;<br>    <span class="hljs-keyword">auto</span> s = st.<span class="hljs-built_in">upper_bound</span>(a[i].l), e = st.<span class="hljs-built_in">upper_bound</span>(a[i].r);<br>    s--, e--;<br>    ll cnt = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (s != e) &#123;<br>      s++;<br>      <span class="hljs-keyword">while</span> (s != e) &#123;<br>        <span class="hljs-keyword">auto</span> it = ++s;<br>        s--;<br>        st.<span class="hljs-built_in">erase</span>(s);<br>        s = it;<br>        cnt++;<br>      &#125;<br>      cnt++;<br>      st.<span class="hljs-built_in">erase</span>(e);<br>    &#125;<br>    ans += cnt * a[i].c;<br>  &#125;<br>  <span class="hljs-keyword">if</span> (st.<span class="hljs-built_in">size</span>() &gt; <span class="hljs-number">1</span>) ans = <span class="hljs-number">-1</span>;<br>  cout &lt;&lt; ans;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="利用并查集"><a href="#利用并查集" class="headerlink" title="利用并查集"></a>利用并查集</h4><p>原理和用set类似。</p>
<p>代码</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span> &#123;<br>  <span class="hljs-type">int</span> l, r, c;<br>  <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-type">const</span> node&amp; u) <span class="hljs-type">const</span> &#123; <span class="hljs-keyword">return</span> c &lt; u.c; &#125;<br>&#125; a[N];<br><span class="hljs-type">int</span> pre[N];<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">root</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123; <span class="hljs-keyword">return</span> pre[x] = (pre[x] == x ? x : <span class="hljs-built_in">root</span>(pre[x])); &#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n, q;<br>  cin &gt;&gt; n &gt;&gt; q;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) pre[i] = i;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= q; ++i) cin &gt;&gt; a[i].l &gt;&gt; a[i].r &gt;&gt; a[i].c;<br>  <span class="hljs-built_in">sort</span>(a + <span class="hljs-number">1</span>, a + <span class="hljs-number">1</span> + q);<br>  ll ans = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= q; ++i) &#123;<br>    <span class="hljs-keyword">auto</span> [l, r, c] = a[i];<br>    ans += c;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">root</span>(l) != <span class="hljs-built_in">root</span>(r)) ans += c, pre[<span class="hljs-built_in">root</span>(r)] = <span class="hljs-built_in">root</span>(r) - <span class="hljs-number">1</span>;<br>  &#125;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">root</span>(<span class="hljs-number">1</span>) != <span class="hljs-built_in">root</span>(n)) ans = <span class="hljs-number">-1</span>;<br>  cout &lt;&lt; ans;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h4 id="利用线段树"><a href="#利用线段树" class="headerlink" title="利用线段树"></a>利用线段树</h4><p>我们维护一个数组$t$，若$i$与$i+1$联通，则为0否则为1。那么，$[l,r]$的联通块数量为$[l,r)$的和加1。证明很容易，不多赘述。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span> &#123;<br>  <span class="hljs-type">int</span> l, r, c;<br>  <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-type">const</span> node&amp; u) <span class="hljs-type">const</span> &#123; <span class="hljs-keyword">return</span> c &lt; u.c; &#125;<br>&#125; a[N];<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ls p &lt;&lt; 1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rs p &lt;&lt; 1 | 1</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">tree</span> &#123;<br>  ll l, r, s, lz, mlz;<br>&#125; t[N &lt;&lt; <span class="hljs-number">2</span>];<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> ll <span class="hljs-title">mo</span><span class="hljs-params">(ll x)</span> </span>&#123; <span class="hljs-keyword">return</span> (x + mod) % mod; &#125;<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">push_up</span><span class="hljs-params">(ll p)</span> </span>&#123; t[p].s = <span class="hljs-built_in">mo</span>(t[ls].s + t[rs].s); &#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(ll p, ll k, ll x)</span> </span>&#123;<br>  t[p].s = <span class="hljs-built_in">mo</span>(<span class="hljs-built_in">mo</span>(t[p].s * k) + <span class="hljs-built_in">mo</span>(x * (t[p].r - t[p].l + <span class="hljs-number">1</span>)));<br>  t[p].mlz = <span class="hljs-built_in">mo</span>(t[p].mlz * k);<br>  t[p].lz = <span class="hljs-built_in">mo</span>(<span class="hljs-built_in">mo</span>(t[p].lz * k) + x);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push_down</span><span class="hljs-params">(ll p)</span> </span>&#123;<br>  <span class="hljs-keyword">if</span> (t[p].lz == <span class="hljs-number">0</span> &amp;&amp; t[p].mlz == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;<br>  <span class="hljs-built_in">update</span>(ls, t[p].mlz, t[p].lz);<br>  <span class="hljs-built_in">update</span>(rs, t[p].mlz, t[p].lz);<br>  t[p].lz = <span class="hljs-number">0</span>, t[p].mlz = <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">build</span><span class="hljs-params">(ll p, ll l, ll r)</span> </span>&#123;<br>  t[p] = &#123;l, r, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;;<br>  <span class="hljs-keyword">if</span> (l == r) &#123;<br>    t[p].s = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span>;<br>  &#125;<br>  ll mid = l + r &gt;&gt; <span class="hljs-number">1</span>;<br>  <span class="hljs-built_in">build</span>(ls, l, mid);<br>  <span class="hljs-built_in">build</span>(rs, mid + <span class="hljs-number">1</span>, r);<br>  <span class="hljs-built_in">push_up</span>(p);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">modify</span><span class="hljs-params">(ll p, ll l, ll r, ll k, ll x)</span> </span>&#123;<br>  <span class="hljs-keyword">if</span> (l &gt; r) <span class="hljs-keyword">return</span>;<br>  <span class="hljs-keyword">if</span> (l &lt;= t[p].l <span class="hljs-keyword">and</span> r &gt;= t[p].r) &#123;<br>    <span class="hljs-built_in">update</span>(p, k, x);<br>    <span class="hljs-keyword">return</span>;<br>  &#125;<br>  <span class="hljs-built_in">push_down</span>(p);<br>  <span class="hljs-keyword">if</span> (l &lt;= t[ls].r) <span class="hljs-built_in">modify</span>(ls, l, r, k, x);<br>  <span class="hljs-keyword">if</span> (r &gt;= t[rs].l) <span class="hljs-built_in">modify</span>(rs, l, r, k, x);<br>  <span class="hljs-built_in">push_up</span>(p);<br>&#125;<br><span class="hljs-function">ll <span class="hljs-title">query</span><span class="hljs-params">(ll p, ll l, ll r)</span> </span>&#123;<br>  <span class="hljs-keyword">if</span> (l &gt; r) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">if</span> (l &lt;= t[p].l <span class="hljs-keyword">and</span> r &gt;= t[p].r) <span class="hljs-keyword">return</span> t[p].s;<br><br>  <span class="hljs-built_in">push_down</span>(p);<br>  ll res = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">if</span> (l &lt;= t[ls].r) res = <span class="hljs-built_in">mo</span>(res + <span class="hljs-built_in">query</span>(ls, l, r));<br>  <span class="hljs-keyword">if</span> (r &gt;= t[rs].l) res = <span class="hljs-built_in">mo</span>(res + <span class="hljs-built_in">query</span>(rs, l, r));<br>  <span class="hljs-keyword">return</span> res;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n, q;<br>  cin &gt;&gt; n &gt;&gt; q;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= q; ++i) cin &gt;&gt; a[i].l &gt;&gt; a[i].r &gt;&gt; a[i].c;<br>  <span class="hljs-built_in">sort</span>(a + <span class="hljs-number">1</span>, a + <span class="hljs-number">1</span> + q);<br>  <span class="hljs-built_in">build</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, n - <span class="hljs-number">1</span>);<br>  ll ans = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= q; ++i) &#123;<br>    <span class="hljs-keyword">auto</span> [l, r, c] = a[i];<br>    ans += c * (<span class="hljs-number">1</span> + <span class="hljs-built_in">query</span>(<span class="hljs-number">1</span>, l, r - <span class="hljs-number">1</span>));<br>    <span class="hljs-built_in">modify</span>(<span class="hljs-number">1</span>, l, r - <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>  &#125;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">query</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, n - <span class="hljs-number">1</span>)) ans = <span class="hljs-number">-1</span>;<br>  cout &lt;&lt; ans;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="2-ABC-361-F-x-a-b"><a href="#2-ABC-361-F-x-a-b" class="headerlink" title="2.ABC 361 F - x = a^b"></a>2.ABC 361 F - x = a^b</h2><h3 id="Problem-Statement-1"><a href="#Problem-Statement-1" class="headerlink" title="Problem Statement"></a>Problem Statement</h3><p>How many integers $x$ between $1$ and $N$, inclusive, can be expressed as $x = a^b$ using some positive integer $a$ and a positive integer $b$ <strong>not less than $2$</strong>?</p>
<h3 id="Constraints-1"><a href="#Constraints-1" class="headerlink" title="Constraints"></a>Constraints</h3><ul>
<li>All input values are integers.</li>
<li>$1 \le N \le 10^{18}$</li>
</ul>
<h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><p>答案为</p>
<script type="math/tex; mode=display">
\sum_{i=1}^{n} [i可以被表示为a^b]</script><p>注意到，一个数如果可以表示为$a^{kb}$那么它一定也可以被表示为$a^b$，那么我们可以先只考虑$b$为质数。我们先排除1，注意到$2^{60}&gt;10^{18}$，那么我们可以只考虑$60$以内的质数，只有17个。设其为$p_i$，我们令$A_i$表示可以表示为$a^{p_i}$的个数。那么答案显然为</p>
<script type="math/tex; mode=display">
|A_1\cup A_2\cup \cdots\cup A_n|</script><p>利用容斥原理显然可以解决。</p>
<p>但是由于精度问题，我们不能直接<code>pow(n,1.0/x)</code>解$\sqrt[x]{n}$，或者解出来后在向左右分别枚举一下，python是可以解决的。但是c++不行。</p>
<p>但是因为这几个质数乘积要小于$60$。实际需要解的数量是很少的，且$x&gt;2$从1枚举也只需要$1e6$，因此可以直接枚举。而$x=2$时，也不能用<code>sqrt()</code>,得用<code>sqrtl()</code>。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> pri[] = &#123;<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>, <span class="hljs-number">13</span>, <span class="hljs-number">17</span>, <span class="hljs-number">19</span>, <span class="hljs-number">23</span>, <span class="hljs-number">29</span>, <span class="hljs-number">31</span>, <span class="hljs-number">37</span>, <span class="hljs-number">41</span>, <span class="hljs-number">43</span>, <span class="hljs-number">47</span>, <span class="hljs-number">53</span>, <span class="hljs-number">59</span>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">nr</span><span class="hljs-params">(ll n, ll r)</span> </span>&#123;<br>  <span class="hljs-keyword">if</span> (r == <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">sqrtl</span>(n);<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>;; ++i) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">pow</span>(i, r) &gt; n) &#123;<br>      <span class="hljs-keyword">return</span> i - <span class="hljs-number">1</span>;<br>    &#125;<br>  &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  ll n;<br>  cin &gt;&gt; n;<br>  <span class="hljs-type">int</span> up = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (; up &lt; <span class="hljs-number">17</span>; ++up) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-number">1ll</span> &lt;&lt; pri[up] &gt; n) <span class="hljs-keyword">break</span>;<br>  &#125;<br>  ll ans = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; (<span class="hljs-number">1ll</span> &lt;&lt; up); ++i) &#123;<br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>, r = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">17</span>; ++j) &#123;<br>      <span class="hljs-keyword">if</span> (i &gt;&gt; j &amp; <span class="hljs-number">1</span>) cnt++, r *= pri[j];<br>      <span class="hljs-keyword">if</span> (r &gt;= <span class="hljs-number">60</span>) <span class="hljs-keyword">break</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (r &lt; <span class="hljs-number">60</span>) &#123;<br>      ans += (cnt % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> ? <span class="hljs-number">-1</span> : <span class="hljs-number">1</span>) * (<span class="hljs-built_in">nr</span>(n, r) - <span class="hljs-number">1</span>);<br>    &#125;<br>  &#125;<br>  cout &lt;&lt; ans + <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p>不妨设$f(x)$为$2\sim n$仅可表示为$a^x$的个数，$g(x)$为可以表示为$a^x$的个数。</p>
<p>那么显然有</p>
<script type="math/tex; mode=display">
f(x)=g(x)-f(2x)-f(3x)\cdots</script><p>从后向前递推即可。</p>
<p>到这里发现，前面的代码能过是<strong>运气好</strong>。因为<code>pow</code>还是会错。参考答案可以自己写个<code>pow</code>函数。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">ll <span class="hljs-title">safe_pow</span><span class="hljs-params">(ll a, ll b)</span> </span>&#123;<br>  ll res = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">for</span> (ll i = <span class="hljs-number">0</span>; i &lt; b; i++) &#123;<br>    <span class="hljs-type">double</span> dres = res;<br>    dres *= a;<br>    <span class="hljs-keyword">if</span> (dres &gt; <span class="hljs-number">2e18</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-number">2e18</span>;<br>    &#125;<br>    res *= a;<br>  &#125;<br>  <span class="hljs-keyword">return</span> res;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">nr</span><span class="hljs-params">(ll n, ll r)</span> </span>&#123;<br>  <span class="hljs-keyword">if</span> (r == <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">sqrtl</span>(n);<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>;; ++i) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">safe_pow</span>(i, r) &gt; n) &#123;<br>      <span class="hljs-keyword">return</span> i - <span class="hljs-number">1</span>;<br>    &#125;<br>  &#125;<br>&#125;<br><span class="hljs-type">int</span> f[<span class="hljs-number">100</span>], g[<span class="hljs-number">100</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  ll n;<br>  cin &gt;&gt; n;<br>  ll ans = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= <span class="hljs-number">60</span>; ++i) g[i] = <span class="hljs-built_in">nr</span>(n, i) - <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> x = <span class="hljs-number">60</span>; x &gt;= <span class="hljs-number">2</span>; --x) &#123;<br>    f[x] = g[x];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">2</span>; k * x &lt;= <span class="hljs-number">60</span>; ++k) f[x] -= f[k * x];<br>    ans += f[x];<br>  &#125;<br>  cout &lt;&lt; ans;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<p>我们也可以用二分来替换开根运算，保证精度。<del>但是懒得写</del></p>
<h2 id="3-ABC362-F-Perfect-Matching-on-a-Tree"><a href="#3-ABC362-F-Perfect-Matching-on-a-Tree" class="headerlink" title="3.ABC362 F - Perfect Matching on a Tree"></a>3.ABC362 F - Perfect Matching on a Tree</h2><h3 id="Problem-Statement-2"><a href="#Problem-Statement-2" class="headerlink" title="Problem Statement"></a>Problem Statement</h3><p>You are given a tree $T$ with $N$ vertices. The vertices are numbered $1$ to $N$, and the $i$-th edge $(1 \leq i \leq N-1)$ connects vertices $u_i$ and $v_i$ bidirectionally.</p>
<p>Using $T$, define a complete graph $G$ with $N$ vertices as follows:</p>
<ul>
<li>The weight $w(x,y)$ of the edge between vertices $x$ and $y$ in $G$ is the shortest distance between vertices $x$ and $y$ in $T$.</li>
</ul>
<p>Find one <strong>maximum weight maximum matching</strong> in $G$. That is, find a set of $\lfloor N/2 \rfloor$ pairs of vertices $M=\{(x_1,y_1),(x_2,y_2),\dots,(x_{\lfloor N/2 \rfloor},y_{\lfloor N/2 \rfloor})\}$ such that each vertex $1,2,\dots, N$ appears in $M$ at most once, and $\displaystyle \sum_{i=1}^{\lfloor N/2 \rfloor} w(x_i,y_i)$ is maximized.</p>
<h3 id="Constraints-2"><a href="#Constraints-2" class="headerlink" title="Constraints"></a>Constraints</h3><ul>
<li>$2 \leq N \leq 2 \times 10^5$</li>
<li>$1 \leq u_i  &lt; v_i \leq N$</li>
<li>The input graph is a tree.</li>
<li>All input values are integers.</li>
</ul>
<h3 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h3><p>考虑计算一条边可能被计算的次数。易证，边$(x,y)$最多被计算$\min(size_x,size_y)$次。考虑每一条边都能达到上界。</p>
<p>下面构造一种方案能够达到上界。</p>
<p>引入树的重心的概念：</p>
<p>树的重心是以其为根节点时的<strong>最大子树大小</strong>最小。下面给出一些性质。</p>
<ol>
<li>等价于最大子树大小不超过$\frac{n}{2}$。</li>
<li>树最多2个重心，且此时树有偶数个节点，且重心两两相邻。</li>
<li>树中所有点到某个点的<strong>距离和</strong>中，到重心的距离和是最小的；如果有两个重心，那么到它们的距离和一样。反过来，距离和最小的点一定是重心。</li>
<li>往树上增加或减少一个<strong>叶子</strong>，如果原节点数是奇数，那么重心可能<strong>增加</strong>一个，原重心<strong>仍是重心</strong>；如果原节点数是偶数，重心可能<strong>减少</strong>一个，另一个重心<strong>仍是重心</strong>。</li>
<li>两棵树通过连一条边组合成新树，则新树重心在原来两棵树的重心的连线上。</li>
</ol>
<p>我们以树的重心为根，其有若干子树。且我们每条路径的两个点分别在两个子树上。</p>
<p>那么假设边$(x,y)$且$y$是$x$的父亲。则有$x$的子树所有节点所匹配的点形成的路径一定会经过$(x,y)$。</p>
<p>下面考虑如何构造这样的方案。</p>
<p>首先，若节点数为偶数，那么最后会子树会剩下一个节点，容易发现将其与根节点匹配即可。然后我们考虑如何找到不同子树的点。注意到每个子树大小小于等于$\frac{n}{2}$ ，且每颗子树的dfs序连续，那么我们可以找dfs序为$(i,i+\frac{n}{2})$的两个点。</p>
<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs cpp">vector&lt;<span class="hljs-type">int</span>&gt; g[N];<br><span class="hljs-type">int</span> si[N], cen, n;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> pre)</span> </span>&#123;<br>  si[x] = <span class="hljs-number">1</span>;<br>  <span class="hljs-type">int</span> mx = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; y : g[x]) &#123;<br>    <span class="hljs-keyword">if</span> (y == pre) <span class="hljs-keyword">continue</span>;<br>    <span class="hljs-built_in">dfs</span>(y, x);<br>    si[x] += si[y];<br>    mx = <span class="hljs-built_in">max</span>(mx, si[y]);<br>  &#125;<br>  mx = <span class="hljs-built_in">max</span>(mx, n - si[x]);<br>  <span class="hljs-keyword">if</span> (mx &lt;= n / <span class="hljs-number">2</span>) cen = x;<br>&#125;<br><br><span class="hljs-type">int</span> dfn[N], idx, hs[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs1</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> pre)</span> </span>&#123;<br>  dfn[x] = ++idx;<br>  hs[idx] = x;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; y : g[x]) &#123;<br>    <span class="hljs-keyword">if</span> (y == pre) <span class="hljs-keyword">continue</span>;<br>    <span class="hljs-built_in">dfs1</span>(y, x);<br>  &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> x, y;<br>  cin &gt;&gt; n;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; n; ++i) &#123;<br>    cin &gt;&gt; x &gt;&gt; y;<br>    g[x].<span class="hljs-built_in">push_back</span>(y);<br>    g[y].<span class="hljs-built_in">push_back</span>(x);<br>  &#125;<br>  <span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br>  <span class="hljs-built_in">dfs1</span>(cen, cen);<br>  <span class="hljs-keyword">if</span> (n &amp; <span class="hljs-number">1</span>) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n / <span class="hljs-number">2</span> + <span class="hljs-number">1</span>; ++i) cout &lt;&lt; hs[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; hs[i + n / <span class="hljs-number">2</span>] &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n / <span class="hljs-number">2</span>; ++i) cout &lt;&lt; hs[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; hs[i + n / <span class="hljs-number">2</span>] &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="2024-SHCPC"><a href="#2024-SHCPC" class="headerlink" title="2024 SHCPC"></a>2024 SHCPC</h2><p><a target="_blank" rel="noopener" href="https://codeforces.com/gym/105229/attachments">https://codeforces.com/gym/105229/attachments</a></p>
<h3 id="4-A-无线网络整点栅格统计"><a href="#4-A-无线网络整点栅格统计" class="headerlink" title="4. A.无线网络整点栅格统计"></a>4. A.无线网络整点栅格统计</h3><p>已知正方形两点坐标$(x_1,y_1),(x_2,y_2)$</p>
<p>令<code>dx=x2-x1,dy=y2-y1</code>，可以得到<code>x3=x1+dy,y3=y1-dx,x4=x3+dx,y4=y3+dy</code></p>
<h3 id="5-M-不共戴天"><a href="#5-M-不共戴天" class="headerlink" title="5. M.不共戴天"></a>5. M.不共戴天</h3><p>注意到可以将其列成表格，</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>1</th>
<th>2</th>
<th>3</th>
</tr>
</thead>
<tbody>
<tr>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
<tr>
<td>10</td>
<td>11</td>
<td>12</td>
</tr>
</tbody>
</table>
</div>
<p>那么所有横着连的不可能和竖着连的相同.且无法多连.枚举一排个数即可.</p>
<h2 id="6-D-1-2-K-Game-博弈论"><a href="#6-D-1-2-K-Game-博弈论" class="headerlink" title="6. D. 1-2-K Game(博弈论)"></a>6. <strong>D. 1-2-K Game</strong>(博弈论)</h2><p><a target="_blank" rel="noopener" href="https://codeforces.com/contest/1194/problem/D">https://codeforces.com/contest/1194/problem/D</a>  博弈论</p>
<p>我们可以列出每个位置的胜负情况.可发现会产生一个$T=k+1$的循环.证明略.</p>
<h2 id="7-F-Teleporting-Takahashi-2-DP"><a href="#7-F-Teleporting-Takahashi-2-DP" class="headerlink" title="7.  F - Teleporting Takahashi 2 (DP)"></a>7.  <strong>F - Teleporting Takahashi 2</strong> (DP)</h2><p><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc372/tasks/abc372_f">https://atcoder.jp/contests/abc372/tasks/abc372_f</a>  DP</p>
<p>如果么没有多余的边,那么每次转移固定.且编号是可计算的.那么每次只需要,计算最多50次即可.</p>
<h3 id="code"><a href="#code" class="headerlink" title="code"></a>code</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n, m, k;<br>  cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; ++i) &#123;<br>    <span class="hljs-type">int</span> x, y;<br>    cin &gt;&gt; x &gt;&gt; y;<br>    g.<span class="hljs-built_in">push_back</span>(&#123;x, y&#125;);<br>  &#125;<br>  <span class="hljs-keyword">auto</span> id = [&amp;](<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> x) &#123; <span class="hljs-built_in">return</span> ((i - x) % n + n) % n == <span class="hljs-number">0</span> ? n : ((i - x) % n + n) % n; &#125;;<br>  f[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>, ff[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= k; ++i) &#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; [x, y] : g) &#123;<br>      <span class="hljs-type">int</span> p = <span class="hljs-built_in">id</span>(y - <span class="hljs-number">1</span> == <span class="hljs-number">0</span> ? n : y - <span class="hljs-number">1</span>, i - <span class="hljs-number">1</span>);<br>      f[p] += ff[<span class="hljs-built_in">id</span>(x, i - <span class="hljs-number">1</span>)];<br>      f[p] %= mod;<br>      v.<span class="hljs-built_in">push_back</span>(p);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> x : v) ff[x] = f[x];<br>  &#125;<br>  ll ans = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) ans = (ans + f[i]) % mod;<br>  cout &lt;&lt; ans &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="8-G-Add-and-Multiply-Queries-树状数组"><a href="#8-G-Add-and-Multiply-Queries-树状数组" class="headerlink" title="8.G - Add and Multiply Queries(树状数组)"></a>8.<strong>G - Add and Multiply Queries</strong>(树状数组)</h2><p><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc368/tasks/abc368_g">https://atcoder.jp/contests/abc368/tasks/abc368_g</a> </p>
<p>注意到其不超过1e18，那么乘法最多不超过60次，因此大量$b$数组是1，所以我们可以用<code>set</code>记录b数组非1的位置，并用树状数组维护区间和。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  cin &gt;&gt; n;<br>  <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">a</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span>, <span class="hljs-title">b</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span></span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) cin &gt;&gt; a[i], <span class="hljs-built_in">add</span>(i, a[i]);<br>  set&lt;<span class="hljs-type">int</span>&gt; st;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>    cin &gt;&gt; b[i];<br>    <span class="hljs-keyword">if</span> (b[i] &gt; <span class="hljs-number">1</span>) st.<span class="hljs-built_in">insert</span>(i);<br>  &#125;<br>  st.<span class="hljs-built_in">insert</span>(n + <span class="hljs-number">1</span>);<br>  <span class="hljs-type">int</span> q;<br>  cin &gt;&gt; q;<br>  <span class="hljs-keyword">while</span> (q--) &#123;<br>    <span class="hljs-type">int</span> op;<br>    cin &gt;&gt; op;<br>    <span class="hljs-keyword">if</span> (op == <span class="hljs-number">1</span>) &#123;<br>      <span class="hljs-type">int</span> i, x;<br>      cin &gt;&gt; i &gt;&gt; x;<br>      <span class="hljs-built_in">add</span>(i, x - a[i]);<br>      a[i] = x;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (op == <span class="hljs-number">2</span>) &#123;<br>      <span class="hljs-type">int</span> i, x;<br>      cin &gt;&gt; i &gt;&gt; x;<br>      <span class="hljs-keyword">if</span> (x == <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">if</span> (st.<span class="hljs-built_in">count</span>(i)) st.<span class="hljs-built_in">erase</span>(i);<br>        b[i] = <span class="hljs-number">1</span>;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        b[i] = x;<br>        st.<span class="hljs-built_in">insert</span>(i);<br>      &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-type">int</span> l, r;<br>      cin &gt;&gt; l &gt;&gt; r;<br>      ll ans = a[l++];<br>      <span class="hljs-comment">// cout &lt;&lt; ans &lt;&lt; endl;</span><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = l; i &lt;= r;) &#123;<br>        <span class="hljs-type">int</span> up = <span class="hljs-built_in">min</span>(r, *st.<span class="hljs-built_in">lower_bound</span>(i));<br>        <span class="hljs-comment">//  cout &lt;&lt; up &lt;&lt; endl;</span><br>        ans += <span class="hljs-built_in">prefix</span>(up - <span class="hljs-number">1</span>) - <span class="hljs-built_in">prefix</span>(i - <span class="hljs-number">1</span>);<br>        ans = <span class="hljs-built_in">max</span>(ans + a[up], ans * b[up]);<br>        <span class="hljs-comment">// cout &lt;&lt; &quot;ans: &quot; &lt;&lt; ans &lt;&lt; &quot;\n&quot;;</span><br>        i = up + <span class="hljs-number">1</span>;<br>      &#125;<br>      cout &lt;&lt; ans &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="9-C-Row-and-Column-Order-构造"><a href="#9-C-Row-and-Column-Order-构造" class="headerlink" title="9.C - Row and Column Order(构造)"></a>9.<strong>C - Row and Column Order</strong>(构造)</h2><p><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/arc181/tasks/arc181_c构造">https://atcoder.jp/contests/arc181/tasks/arc181_c构造</a></p>
<h3 id="法一"><a href="#法一" class="headerlink" title="法一"></a>法一</h3><p>一种简单的做法是，将$S_j:=S_i$ 然后在加一个1。这样就能保证满足行，对于列，若我们按Q从后往前加，就能保证，前面的包含在后面的，且后面的1更多，因此也满足。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n;<br>  cin &gt;&gt; n;<br>  <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">p</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span>, <span class="hljs-title">q</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span></span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) cin &gt;&gt; p[i];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) cin &gt;&gt; q[i];<br>  vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">ans</span>(n + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(n + <span class="hljs-number">1</span>));<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>, j = n; i &lt;= n; ++i, --j) &#123;<br>    ans[p[i]] = ans[p[i - <span class="hljs-number">1</span>]];<br>    ans[p[i]][q[j]] = <span class="hljs-number">1</span>;<br>  &#125;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; ++j) &#123;<br>      cout &lt;&lt; ans[i][j];<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="法二"><a href="#法二" class="headerlink" title="法二"></a>法二</h3><p>我们递归的做，先将$P_1$全填0，$Q_n$全填1，然后删除这一行和列。</p>
<p>这样做，对于行，后填的填的1更多，且前面的含于后面。</p>
<p>对于列，同理。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n;<br>  cin &gt;&gt; n;<br>  <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">p</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span>, <span class="hljs-title">q</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span></span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) cin &gt;&gt; p[i];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) cin &gt;&gt; q[i];<br>  vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">ans</span>(n + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(n + <span class="hljs-number">1</span>));<br>  <span class="hljs-function">vector&lt;<span class="hljs-type">bool</span>&gt; <span class="hljs-title">c</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span></span>;<br>  <span class="hljs-keyword">auto</span> dfs = [&amp;](<span class="hljs-keyword">auto</span>&amp; self, <span class="hljs-type">int</span> x) -&gt; <span class="hljs-type">void</span> &#123;<br>    <span class="hljs-keyword">if</span> (x &gt; n) <span class="hljs-keyword">return</span>;<br>    c[p[x]] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>      <span class="hljs-keyword">if</span> (c[i]) <span class="hljs-keyword">continue</span>;<br>      ans[i][q[n + <span class="hljs-number">1</span> - x]] = <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-built_in">self</span>(self, x + <span class="hljs-number">1</span>);<br>  &#125;;<br>  <span class="hljs-built_in">dfs</span>(dfs, <span class="hljs-number">1</span>);<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; ++j) &#123;<br>      cout &lt;&lt; ans[i][j];<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="10-D-Connect-the-Dots-并查集-dp"><a href="#10-D-Connect-the-Dots-并查集-dp" class="headerlink" title="10.D. Connect the Dots(并查集+dp)"></a>10.D. Connect the Dots(并查集+dp)</h2><p><a target="_blank" rel="noopener" href="https://codeforces.com/contest/2020/problem/D">https://codeforces.com/contest/2020/problem/D</a></p>
<p>并查集+dp</p>
<p>注意到d很小，因此可以枚举d，考虑将d当做一个常数。</p>
<p>对于固定的d，如果我们知道每一个点所能连接的最远的点。就可以轻松解决。</p>
<p>我们设<code>f[i][j]</code>为$d=j$时，i的最远点。有状态转移方程</p>
<script type="math/tex; mode=display">
f_{i,j}=\max(f_{i,j},(f_{i,j}\geq i+j)f_{i+1,j})</script><script type="math/tex; mode=display">
f_{i+j,j}=\max(f_{i+j,j},f_{i,j})</script><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs CPP"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n, m;<br>  cin &gt;&gt; n &gt;&gt; m;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) pre[i] = i;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; ++i) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; ++j) &#123;<br>      f[j][i] = j;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; ++i) &#123;<br>    <span class="hljs-type">int</span> a, d, k;<br>    cin &gt;&gt; a &gt;&gt; d &gt;&gt; k;<br>    f[a][d] = <span class="hljs-built_in">max</span>(f[a][d], a + k * d);<br>  &#125;<br>  <span class="hljs-comment">//  d: 1~10</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; ++i) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = i + <span class="hljs-number">1</span>; j &lt;= n; ++j) &#123;<br>      <span class="hljs-keyword">if</span> (f[j - i][i] &gt;= j) &#123;<br>        f[j - i][i] = <span class="hljs-built_in">max</span>(f[j - i][i], f[j][i]);<br>        f[j][i] = f[j - i][i];<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; ++i) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = n; j &gt;= <span class="hljs-number">1</span>; --j) &#123;<br>      <span class="hljs-built_in">merge</span>(j, f[j][i]);<br>    &#125;<br>  &#125;<br>  <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">root</span>(i) == i) ans++;<br>  &#125;<br>  cout &lt;&lt; ans &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h2 id="11-B-Improve-Inversions-贪心"><a href="#11-B-Improve-Inversions-贪心" class="headerlink" title="11.B - Improve Inversions(贪心)"></a>11.<strong>B - Improve Inversions</strong>(贪心)</h2><p><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/arc180/tasks/arc180_b">https://atcoder.jp/contests/arc180/tasks/arc180_b</a> </p>
<p>对于$i$来说，我们在后面找比他小的然后从大到小交换是最好的。</p>
<p>那么我们从小到大枚举$i$，然后从大到小交换，因为前面交换的都比$i$小，那么不会影响$i$的交换次数。</p>
<p>因此可以达到</p>
<script type="math/tex; mode=display">
\sum_{i=1}^{n}\sum_{j=i+k}^{n}[a_j<a_i]</script><p>并且可以证明这是最大的。因为假设我们交换一次，$x,y(x<y)$ ，那么，对于$l\leq x-k$和$l>y-k$不会有影响。但对于$x-k&lt;l\leq y-k$若$l=x$，则一定减少一次，否则，至少可以保证不会变多。</p>
<p>因此这就是最大值。</p>
<h2 id="12-F-Tree-Degree-Optimization-贪心-prufer-序列"><a href="#12-F-Tree-Degree-Optimization-贪心-prufer-序列" class="headerlink" title="12.F - Tree Degree Optimization(贪心 prufer 序列)"></a>12.<strong>F - Tree Degree Optimization</strong>(贪心 prufer 序列)</h2><p><a target="_blank" rel="noopener" href="https://oi-wiki.org/graph/prufer/">https://oi-wiki.org/graph/prufer/</a></p>
<h2 id="13-G-AtCoder-Tour-DP-最短路"><a href="#13-G-AtCoder-Tour-DP-最短路" class="headerlink" title="13.G - AtCoder Tour(DP/最短路)"></a>13.<strong>G - AtCoder Tour</strong>(DP/最短路)</h2><p><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc358/tasks/abc358_g">https://atcoder.jp/contests/abc358/tasks/abc358_g</a></p>
<p>容易想到它一定会走到一个终点并一直停在那里。</p>
<h3 id="法一-1"><a href="#法一-1" class="headerlink" title="法一"></a>法一</h3><p>可以枚举终点<code>(i,j)</code>。只连接权值小于终点的点。定义权值为<code>a[i][j]-a[x][y]</code>。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs cpp">ll a[<span class="hljs-number">100</span>][<span class="hljs-number">100</span>];<br>ll n, m, k, d[<span class="hljs-number">3000</span>];<br>vector&lt;pll&gt; g[<span class="hljs-number">3000</span>];<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">to_i</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> </span>&#123; <span class="hljs-keyword">return</span> (x - <span class="hljs-number">1</span>) * m + y; &#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> </span>&#123; <span class="hljs-keyword">return</span> x &gt; <span class="hljs-number">0</span> &amp;&amp; x &lt;= n &amp;&amp; y &gt; <span class="hljs-number">0</span> &amp;&amp; y &lt;= m; &#125;<br><br>bitset&lt;3000&gt; vis;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dij</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123;<br>  vis = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">2500</span>; ++i) d[i] = linf;<br>  d[x] = <span class="hljs-number">0</span>;<br>  priority_queue&lt;pll, vector&lt;pll&gt;, greater&lt;pll&gt;&gt; q;<br>  q.<span class="hljs-built_in">push</span>(&#123;<span class="hljs-number">0</span>, x&#125;);<br>  <span class="hljs-keyword">while</span> (q.<span class="hljs-built_in">size</span>()) &#123;<br>    <span class="hljs-keyword">auto</span> [_, id] = q.<span class="hljs-built_in">top</span>();<br>    q.<span class="hljs-built_in">pop</span>();<br>    <span class="hljs-keyword">if</span> (vis[id]) <span class="hljs-keyword">continue</span>;<br>    vis[id] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; [y, z] : g[id]) &#123;<br>      <span class="hljs-keyword">if</span> (d[y] &gt; d[id] + z) &#123;<br>        d[y] = d[id] + z;<br>        q.<span class="hljs-built_in">push</span>(&#123;d[y], y&#125;);<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;<br>  <span class="hljs-type">int</span> si, sj;<br>  cin &gt;&gt; si &gt;&gt; sj;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; ++j) &#123;<br>      cin &gt;&gt; a[i][j];<br>    &#125;<br>  &#125;<br>  ll ans = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; ++j) &#123;<br>      <span class="hljs-keyword">if</span> (a[i][j] &lt; a[si][sj]) <span class="hljs-keyword">continue</span>;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> ii = <span class="hljs-number">1</span>; ii &lt;= n; ++ii) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> jj = <span class="hljs-number">1</span>; jj &lt;= m; ++jj) &#123;<br>          g[<span class="hljs-built_in">to_i</span>(ii, jj)].<span class="hljs-built_in">clear</span>();<br>        &#125;<br>      &#125;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> ii = <span class="hljs-number">1</span>; ii &lt;= n; ++ii) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> jj = <span class="hljs-number">1</span>; jj &lt;= m; ++jj) &#123;<br>          <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(ii + <span class="hljs-number">1</span>, jj)) &#123;<br>            <span class="hljs-keyword">if</span> (a[ii + <span class="hljs-number">1</span>][jj] &lt;= a[i][j]) g[<span class="hljs-built_in">to_i</span>(ii, jj)].<span class="hljs-built_in">push_back</span>(&#123;<span class="hljs-built_in">to_i</span>(ii + <span class="hljs-number">1</span>, jj), a[i][j] - a[ii + <span class="hljs-number">1</span>][jj]&#125;);<br>            <span class="hljs-keyword">if</span> (a[ii][jj] &lt;= a[i][j]) g[<span class="hljs-built_in">to_i</span>(ii + <span class="hljs-number">1</span>, jj)].<span class="hljs-built_in">push_back</span>(&#123;<span class="hljs-built_in">to_i</span>(ii, jj), a[i][j] - a[ii][jj]&#125;);<br>          &#125;<br>          <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(ii, jj + <span class="hljs-number">1</span>)) &#123;<br>            <span class="hljs-keyword">if</span> (a[ii][jj + <span class="hljs-number">1</span>] &lt;= a[i][j]) g[<span class="hljs-built_in">to_i</span>(ii, jj)].<span class="hljs-built_in">push_back</span>(&#123;<span class="hljs-built_in">to_i</span>(ii, jj + <span class="hljs-number">1</span>), a[i][j] - a[ii][jj + <span class="hljs-number">1</span>]&#125;);<br>            <span class="hljs-keyword">if</span> (a[ii][jj] &lt;= a[i][j]) g[<span class="hljs-built_in">to_i</span>(ii, jj + <span class="hljs-number">1</span>)].<span class="hljs-built_in">push_back</span>(&#123;<span class="hljs-built_in">to_i</span>(ii, jj), a[i][j] - a[ii][jj]&#125;);<br>          &#125;<br>        &#125;<br>      &#125;<br>      <span class="hljs-built_in">dij</span>(<span class="hljs-built_in">to_i</span>(si, sj));<br>      <span class="hljs-comment">// cout &lt;&lt; &quot;end:&quot; &lt;&lt; i &lt;&lt; &quot; &quot; &lt;&lt; j &lt;&lt; endl;</span><br>      <span class="hljs-comment">// cout &lt;&lt; &quot;dis:&quot; &lt;&lt; d[to_i(i, j)] &lt;&lt; endl;</span><br>      ans = <span class="hljs-built_in">max</span>(ans, k * a[i][j] - d[<span class="hljs-built_in">to_i</span>(i, j)]);<br>    &#125;<br>  &#125;<br>  cout &lt;&lt; ans;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="法二-1"><a href="#法二-1" class="headerlink" title="法二"></a>法二</h3><p>枚举走到终点的步数。利用dp找到指定步数下最大权值。可利用滚动数组优化。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;<br>  <span class="hljs-type">int</span> si, sj;<br>  cin &gt;&gt; si &gt;&gt; sj;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; ++j) &#123;<br>      cin &gt;&gt; a[i][j];<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; ++j) &#123;<br>      f[<span class="hljs-number">0</span>][i][j] = f[<span class="hljs-number">1</span>][i][j] = -linf;<br>    &#125;<br>  &#125;<br>  f[<span class="hljs-number">0</span>][si][sj] = <span class="hljs-number">0</span>;<br>  ll ans = k * a[si][sj];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> x = <span class="hljs-number">1</span>; x &lt;= <span class="hljs-built_in">min</span>(k, <span class="hljs-number">1ll</span> * n * m); ++x) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; ++j) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> t = <span class="hljs-number">0</span>; t &lt; <span class="hljs-number">4</span>; ++t) &#123;<br>          <span class="hljs-type">int</span> cx = i + dx[t], cy = j + dy[t];<br>          <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(cx, cy)) f[x &amp; <span class="hljs-number">1</span>][i][j] = <span class="hljs-built_in">max</span>(f[(x - <span class="hljs-number">1</span>) &amp; <span class="hljs-number">1</span>][cx][cy] + a[i][j], f[x &amp; <span class="hljs-number">1</span>][i][j]);<br>        &#125;<br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; ++j) &#123;<br>        ans = <span class="hljs-built_in">max</span>(ans, f[x &amp; <span class="hljs-number">1</span>][i][j] + (k - x) * a[i][j]);<br>      &#125;<br>    &#125;<br>  &#125;<br>  cout &lt;&lt; ans;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="14-Help-is-needed-for-Dexter（数学）"><a href="#14-Help-is-needed-for-Dexter（数学）" class="headerlink" title="14.Help is needed for Dexter（数学）"></a>14.Help is needed for Dexter（数学）</h2><p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/UVA11384">https://www.luogu.com.cn/problem/UVA11384</a></p>
<p>显然重复的元素越多越好。</p>
<p>注意到一种较优的做法是</p>
<script type="math/tex; mode=display">
f_n=f_{\left\lfloor\frac{n}{2} \right\rfloor}+1</script><p>先在来证明这是最优的。显然有$f_n$是不减少的。</p>
<p>有$f_n=\left\lfloor\log_2{n}\right\rfloor+1$</p>
<p>若这不是最优的，则存在最小的$m$使得</p>
<script type="math/tex; mode=display">
f_m\leq \left\lfloor\log_2{m}\right\rfloor</script><p> 那么</p>
<script type="math/tex; mode=display">
f_{m-1}=\left\lfloor\log_2{(m-1)}\right\rfloor+1</script><p>而$f_m\geq f_{m-1}$，故</p>
<script type="math/tex; mode=display">
m=2^k</script><p>因此我们可以进行$k$次操作让，$2^k$个元素变成0，不妨设第$i$次操作减去$a_i$。</p>
<p>设$S$为$\{1,2,\cdots,k\}$的非空子集。那么就有对于$1\leq x \leq 2^k$ 存在一个$S$ 使得$\sum_{i\in S} a_i=x$，但是只有$2^k-1$个非空子集。不可能形成$2^k$个元素。</p>
<p>故上式就是最优解。</p>
<h2 id="15-Colored-Cubes（枚举）"><a href="#15-Colored-Cubes（枚举）" class="headerlink" title="15.Colored Cubes（枚举）"></a>15.Colored Cubes（枚举）</h2><p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/UVA1352">https://www.luogu.com.cn/problem/UVA1352</a></p>
<p>数据很小，考虑直接枚举。难点在于写代码。</p>
<p>可以先打表出一个正方体的所有情况，枚举每一个正方体的情况，第一个可以按照默认位置。然后记录每一面的各个颜色出现次数，保留最多的即可。</p>
<h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">using</span> ll = <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-keyword">using</span> ull = <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> REP(i, n) for (int i = 1; i &lt;= (n); ++i)</span><br><span class="hljs-keyword">typedef</span> pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; pii;<br><span class="hljs-keyword">typedef</span> pair&lt;ll, ll&gt; pll;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">998244353</span>;<br><span class="hljs-comment">// using i128=__int128_t;</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">9</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> iinf = <span class="hljs-number">1e9</span>;<br><span class="hljs-type">const</span> ll linf = <span class="hljs-number">1e18</span>;<br><br><span class="hljs-type">int</span> pose[<span class="hljs-number">25</span>][<span class="hljs-number">7</span>] = &#123;<br>    &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">4</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>&#125;,<br>    &#123;<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">2</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">6</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>&#125;,<br>    &#123;<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">6</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>&#125;,<br>    &#123;<span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>&#125;,<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n;<br>  <span class="hljs-keyword">while</span> (cin &gt;&gt; n &amp;&amp; n) &#123;<br>    vector&lt;array&lt;string, 10&gt;&gt; <span class="hljs-built_in">col</span>(n + <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">REP</span>(i, n) <span class="hljs-built_in">REP</span>(j, <span class="hljs-number">6</span>) cin &gt;&gt; col[i][j];<br>    <span class="hljs-type">int</span> ans = iinf;<br>    <span class="hljs-type">int</span> p[n + <span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">auto</span> count = [&amp;]() -&gt; <span class="hljs-type">int</span> &#123;<br>      map&lt;string, <span class="hljs-type">int</span>&gt; cnt[<span class="hljs-number">7</span>];<br>      <span class="hljs-built_in">REP</span>(i, <span class="hljs-number">6</span>) cnt[i][col[<span class="hljs-number">1</span>][i]]++;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; ++i) &#123;<br>        <span class="hljs-built_in">REP</span>(j, <span class="hljs-number">6</span>) cnt[j][col[i][pose[p[i]][j]]]++;<br>      &#125;<br>      <span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;<br>      <span class="hljs-built_in">REP</span>(i, <span class="hljs-number">6</span>) &#123;<br>        <span class="hljs-type">int</span> mx = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = cnt[i].<span class="hljs-built_in">begin</span>(); it != cnt[i].<span class="hljs-built_in">end</span>(); ++it) mx = <span class="hljs-built_in">max</span>(mx, it-&gt;second);<br>        res += n - mx;<br>      &#125;<br>      <span class="hljs-keyword">return</span> res;<br>    &#125;;<br>    function&lt;<span class="hljs-type">void</span>(<span class="hljs-type">int</span>)&gt; dfs = [&amp;](<span class="hljs-type">int</span> id) -&gt; <span class="hljs-type">void</span> &#123;<br>      <span class="hljs-keyword">if</span> (id &gt; n) <span class="hljs-keyword">return</span> ans = <span class="hljs-built_in">min</span>(ans, <span class="hljs-built_in">count</span>()), <span class="hljs-built_in">void</span>();<br>      <span class="hljs-built_in">REP</span>(i, <span class="hljs-number">24</span>) &#123;<br>        p[id] = i;<br>        <span class="hljs-built_in">dfs</span>(id + <span class="hljs-number">1</span>);<br>      &#125;<br>    &#125;;<br>    <span class="hljs-built_in">dfs</span>(<span class="hljs-number">2</span>);<br>    cout &lt;&lt; ans &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">STDIO</span><span class="hljs-params">()</span> </span>&#123;<br>  ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>), cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>), cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-built_in">STDIO</span>();<br>  <span class="hljs-type">int</span> _ = <span class="hljs-number">1</span>;<br>  <span class="hljs-comment">// cin&gt;&gt;_;</span><br>  <span class="hljs-keyword">while</span> (_--) <span class="hljs-built_in">solve</span>();<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="16-Even-Parity（枚举）"><a href="#16-Even-Parity（枚举）" class="headerlink" title="16.Even Parity（枚举）"></a>16.Even Parity（枚举）</h2><p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/UVA11464">https://www.luogu.com.cn/problem/UVA11464</a></p>
<p>第一行一旦确定，所有的都确定了。枚举第一行的所有情形。检查是否满足条件即可。</p>
<p>难点还是写代码。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">using</span> ll = <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-keyword">using</span> ull = <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> REP(i, n) for (int i = 1; i &lt;= (n); ++i)</span><br><span class="hljs-keyword">typedef</span> pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; pii;<br><span class="hljs-keyword">typedef</span> pair&lt;ll, ll&gt; pll;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">998244353</span>;<br><span class="hljs-comment">// using i128=__int128_t;</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">9</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> iinf = <span class="hljs-number">1e9</span>;<br><span class="hljs-type">const</span> ll linf = <span class="hljs-number">1e18</span>;<br><span class="hljs-type">int</span> dx[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">-1</span>&#125;;<br><span class="hljs-type">int</span> dy[] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">0</span>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n;<br>  cin &gt;&gt; n;<br>  <span class="hljs-keyword">auto</span> check = [&amp;](<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y) &#123; <span class="hljs-keyword">return</span> x &gt; <span class="hljs-number">0</span> &amp;&amp; x &lt;= n &amp;&amp; y &gt; <span class="hljs-number">0</span> &amp;&amp; y &lt;= n; &#125;;<br>  vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">a</span>(n + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(n + <span class="hljs-number">1</span>));<br>  vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">c</span>(n + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(n + <span class="hljs-number">1</span>));<br>  <span class="hljs-built_in">REP</span>(i, n) <span class="hljs-built_in">REP</span>(j, n) cin &gt;&gt; a[i][j];<br>  <span class="hljs-type">int</span> ans = <span class="hljs-number">-1</span>, mi = iinf;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1ll</span> &lt;&lt; n; ++i) &#123;<br>    <span class="hljs-keyword">if</span> (i == <span class="hljs-number">2</span>) &#123;<br>      <span class="hljs-type">int</span> x = <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">b</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span></span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n; ++j) b[j + <span class="hljs-number">1</span>] = i &gt;&gt; j &amp; <span class="hljs-number">1</span>;<br>    <span class="hljs-type">bool</span> ok = <span class="hljs-literal">true</span>;<br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n &amp;&amp; ok; ++j) &#123;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">1</span>; k &lt;= n &amp;&amp; ok; ++k) &#123;<br>        <span class="hljs-keyword">if</span> (b[k] == <span class="hljs-number">0</span> &amp;&amp; a[j][k] == <span class="hljs-number">1</span>) ok = <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">if</span> (b[k] == <span class="hljs-number">1</span> &amp;&amp; a[j][k] == <span class="hljs-number">0</span>) cnt++, c[j][k] = b[k];<br>      &#125;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">1</span>; k &lt;= n; ++k) &#123;<br>        <span class="hljs-type">int</span> C = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> l = <span class="hljs-number">0</span>; l &lt; <span class="hljs-number">3</span>; ++l) &#123;<br>          <span class="hljs-type">int</span> cx = j + dx[l], cy = k + dy[l];<br>          <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(cx, cy) &amp;&amp; c[cx][cy]) C++;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (C &amp; <span class="hljs-number">1</span>) &#123;<br>          b[k] = <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          b[k] = <span class="hljs-number">0</span>;<br>        &#125;<br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (ok) mi = <span class="hljs-built_in">min</span>(mi, cnt);<br>    c = a;<br>  &#125;<br>  <span class="hljs-keyword">if</span> (mi &lt; iinf) ans = mi;<br>  cout &lt;&lt; ans &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">STDIO</span><span class="hljs-params">()</span> </span>&#123;<br>  ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>), cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>), cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-built_in">STDIO</span>();<br>  <span class="hljs-type">int</span> _ = <span class="hljs-number">1</span>;<br>  cin &gt;&gt; _;<br>  <span class="hljs-built_in">REP</span>(i, _) cout &lt;&lt; <span class="hljs-string">&quot;Case &quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot;: &quot;</span>, <span class="hljs-built_in">solve</span>();<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="17-Image-Is-Everything-枚举"><a href="#17-Image-Is-Everything-枚举" class="headerlink" title="17.Image Is Everything(枚举)"></a>17.Image Is Everything(枚举)</h2><p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/UVA1030">https://www.luogu.com.cn/problem/UVA1030</a></p>
<p>我们将一定没有的位置标记出来，即可算出答案。有以下两种情况。</p>
<ol>
<li>视图有<code>.</code>。</li>
<li>几个视图相互矛盾。</li>
</ol>
<p>难点依旧是写代码。具体实现看代码。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">using</span> ll = <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-keyword">using</span> ull = <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> REP(i, n) for (int i = 1; i &lt;= (n); ++i)</span><br><span class="hljs-keyword">typedef</span> pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; pii;<br><span class="hljs-keyword">typedef</span> pair&lt;ll, ll&gt; pll;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">998244353</span>;<br><span class="hljs-comment">// using i128=__int128_t;</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">9</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> iinf = <span class="hljs-number">1e9</span>;<br><span class="hljs-type">const</span> ll linf = <span class="hljs-number">1e18</span>;<br><br><span class="hljs-type">char</span> s[<span class="hljs-number">10</span>][<span class="hljs-number">15</span>][<span class="hljs-number">15</span>], h[<span class="hljs-number">15</span>][<span class="hljs-number">15</span>][<span class="hljs-number">15</span>];<br><br><span class="hljs-type">int</span> n;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">T</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j, <span class="hljs-type">int</span> k, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span>&amp; x, <span class="hljs-type">int</span>&amp; y, <span class="hljs-type">int</span>&amp; z)</span> </span>&#123;<br>  <span class="hljs-keyword">if</span> (i == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> x = l, y = k, z = j, <span class="hljs-built_in">void</span>();<br>  <span class="hljs-keyword">if</span> (i == <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> x = n + <span class="hljs-number">1</span> - k, y = l, z = j, <span class="hljs-built_in">void</span>();<br>  <span class="hljs-keyword">if</span> (i == <span class="hljs-number">3</span>) <span class="hljs-keyword">return</span> x = n + <span class="hljs-number">1</span> - l, y = n + <span class="hljs-number">1</span> - k, z = j, <span class="hljs-built_in">void</span>();<br>  <span class="hljs-keyword">if</span> (i == <span class="hljs-number">4</span>) <span class="hljs-keyword">return</span> x = k, y = n + <span class="hljs-number">1</span> - l, z = j, <span class="hljs-built_in">void</span>();<br>  <span class="hljs-keyword">if</span> (i == <span class="hljs-number">5</span>) <span class="hljs-keyword">return</span> x = n + <span class="hljs-number">1</span> - j, y = k, z = l, <span class="hljs-built_in">void</span>();<br>  <span class="hljs-keyword">if</span> (i == <span class="hljs-number">6</span>) <span class="hljs-keyword">return</span> x = j, y = k, z = n + <span class="hljs-number">1</span> - l, <span class="hljs-built_in">void</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-keyword">while</span> (cin &gt;&gt; n &amp;&amp; n) &#123;<br>    <span class="hljs-built_in">REP</span>(i, n) <span class="hljs-built_in">REP</span>(j, <span class="hljs-number">6</span>) <span class="hljs-built_in">REP</span>(k, n) cin &gt;&gt; s[j][i][k];<br>    <span class="hljs-built_in">REP</span>(i, n) <span class="hljs-built_in">REP</span>(j, n) <span class="hljs-built_in">REP</span>(k, n) h[i][j][k] = <span class="hljs-string">&#x27;?&#x27;</span>;<br>    <span class="hljs-built_in">REP</span>(i, <span class="hljs-number">6</span>) <span class="hljs-built_in">REP</span>(j, n) <span class="hljs-built_in">REP</span>(k, n) <span class="hljs-keyword">if</span> (s[i][j][k] == <span class="hljs-string">&#x27;.&#x27;</span>) &#123;<br>      <span class="hljs-built_in">REP</span>(l, n) &#123;<br>        <span class="hljs-type">int</span> x, y, z;<br>        <span class="hljs-built_in">T</span>(i, j, k, l, x, y, z);<br>        h[x][y][z] = <span class="hljs-string">&#x27;.&#x27;</span>;<br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>      <span class="hljs-type">bool</span> ok = <span class="hljs-literal">true</span>;<br>      <span class="hljs-built_in">REP</span>(i, <span class="hljs-number">6</span>) <span class="hljs-built_in">REP</span>(j, n) <span class="hljs-built_in">REP</span>(k, n) <span class="hljs-keyword">if</span> (s[i][j][k] != <span class="hljs-string">&#x27;.&#x27;</span>) &#123;<br>        <span class="hljs-built_in">REP</span>(l, n) &#123;<br>          <span class="hljs-type">int</span> x, y, z;<br>          <span class="hljs-built_in">T</span>(i, j, k, l, x, y, z);<br>          <span class="hljs-keyword">if</span> (h[x][y][z] == <span class="hljs-string">&#x27;.&#x27;</span>) <span class="hljs-keyword">continue</span>;<br>          <span class="hljs-keyword">if</span> (h[x][y][z] == <span class="hljs-string">&#x27;?&#x27;</span>) &#123;<br>            h[x][y][z] = s[i][j][k];<br>            <span class="hljs-keyword">break</span>;<br>          &#125;<br>          <span class="hljs-keyword">if</span> (h[x][y][z] == s[i][j][k]) <span class="hljs-keyword">break</span>;<br>          h[x][y][z] = <span class="hljs-string">&#x27;.&#x27;</span>;<br>          ok = <span class="hljs-literal">false</span>;<br>        &#125;<br>      &#125;<br>      <span class="hljs-keyword">if</span> (ok) <span class="hljs-keyword">break</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">REP</span>(i, n) <span class="hljs-built_in">REP</span>(j, n) <span class="hljs-built_in">REP</span>(k, n) ans += (h[i][j][k] != <span class="hljs-string">&#x27;.&#x27;</span>);<br>    cout &lt;&lt; <span class="hljs-string">&quot;Maximum weight: &quot;</span> &lt;&lt; ans &lt;&lt; <span class="hljs-string">&quot; gram(s)\n&quot;</span>;<br>  &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">STDIO</span><span class="hljs-params">()</span> </span>&#123;<br>  ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>), cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>), cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-built_in">STDIO</span>();<br>  <span class="hljs-type">int</span> _ = <span class="hljs-number">1</span>;<br>  <span class="hljs-comment">// cin&gt;&gt;_;</span><br>  <span class="hljs-keyword">while</span> (_--) <span class="hljs-built_in">solve</span>();<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="18-A-Different-Task-数学"><a href="#18-A-Different-Task-数学" class="headerlink" title="18.A Different Task(数学)"></a>18.A Different Task(数学)</h2><p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/UVA10795">https://www.luogu.com.cn/problem/UVA10795</a></p>
<p>我们从大到小移动是最优的。下面给出证明。</p>
<p>我们考虑移动$x$的前一步，若需要移动，那么我们需要将$1,2,\cdots,x-1$全部移动到另外一个柱子上。不管是否先移动小的，此时完全一致。故从大到小移动一定不劣。</p>
<p>考虑最大的，如果在正确的柱子上，就不需要移动，并且可以直接删除。</p>
<p>另外注意到操作完全可逆。假设我们需要将$k$，从1移动到2，那么我们先将$1,2,\cdots,k-1$移动到3。将初始到这个状态需要的操作数，和最终状态到这个状态的操作数分别计算出来。相加即是答案。</p>
<p>具体地。我们有函数<code>f(st,k,g)</code>，为从状态$st$，将$1,2,\cdots,k$移动到$g$需要的最少操作数。</p>
<p>那么答案为<code>f(s,k-1,6-s[k]-e[k])+f(e,k-1,6-s[k]-e[k])+1</code>。</p>
<p>下面考虑计算f</p>
<p>若$k$就在$g$，那么<code>f(st,k,g)=f(st,k-1,g)</code>，注意处理$k=0$。</p>
<p>否则<code>f(st,k,g)=f(st,k-1,6-g-st[k])+2^&#123;k-1&#125;</code></p>
<p>代码</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">using</span> ll = <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-keyword">using</span> ull = <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> REP(i, n) for (int i = 1; i &lt;= (n); ++i)</span><br><span class="hljs-keyword">typedef</span> pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; pii;<br><span class="hljs-keyword">typedef</span> pair&lt;ll, ll&gt; pll;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">998244353</span>;<br><span class="hljs-comment">// using i128=__int128_t;</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">9</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> iinf = <span class="hljs-number">1e9</span>;<br><span class="hljs-type">const</span> ll linf = <span class="hljs-number">1e18</span>;<br><br><span class="hljs-function">ll <span class="hljs-title">f</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; st, <span class="hljs-type">int</span> k, <span class="hljs-type">int</span> g)</span> </span>&#123;<br>  <span class="hljs-keyword">if</span> (k == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">if</span> (st[k] == g) <span class="hljs-keyword">return</span> <span class="hljs-built_in">f</span>(st, k - <span class="hljs-number">1</span>, g);<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">f</span>(st, k - <span class="hljs-number">1</span>, <span class="hljs-number">6</span> - g - st[k]) + (<span class="hljs-number">1ll</span> &lt;&lt; k - <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n, _ = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">while</span> (cin &gt;&gt; n &amp;&amp; n) &#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Case &quot;</span> &lt;&lt; (++_) &lt;&lt; <span class="hljs-string">&quot;: &quot;</span>;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">s</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span>, <span class="hljs-title">e</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span></span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) cin &gt;&gt; s[i];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) cin &gt;&gt; e[i];<br>    ll ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n; i &gt;= <span class="hljs-number">1</span>; --i) &#123;<br>      <span class="hljs-keyword">if</span> (s[i] != e[i]) &#123;<br>        ans = <span class="hljs-built_in">f</span>(s, i - <span class="hljs-number">1</span>, <span class="hljs-number">6</span> - s[i] - e[i]) + <span class="hljs-built_in">f</span>(e, i - <span class="hljs-number">1</span>, <span class="hljs-number">6</span> - s[i] - e[i]) + <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">break</span>;<br>      &#125;<br>    &#125;<br>    cout &lt;&lt; ans &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">STDIO</span><span class="hljs-params">()</span> </span>&#123;<br>  ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>), cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>), cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-built_in">STDIO</span>();<br>  <span class="hljs-type">int</span> _ = <span class="hljs-number">1</span>;<br>  <span class="hljs-comment">// cin&gt;&gt;_;</span><br>  <span class="hljs-keyword">while</span> (_--) <span class="hljs-built_in">solve</span>();<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br></code></pre></td></tr></table></figure>
<h2 id="19-Network-DFS-贪心"><a href="#19-Network-DFS-贪心" class="headerlink" title="19.Network(DFS,贪心)"></a>19.Network(DFS,贪心)</h2><p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/UVA315">https://www.luogu.com.cn/problem/UVA315</a></p>
<p>以s为根。</p>
<p>有贪心策略，从最深节点开始遍历。走$k$个父亲，然后从他开始dfs，标记离他小于k的。下面说明其正确性。</p>
<p>首先$k$子树下全部标记了。同时，更靠近上面的节点。故一定不会更差。</p>
<p>代码</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">using</span> ll = <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-keyword">using</span> ull = <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> REP(i, n) for (int i = 1; i &lt;= (n); ++i)</span><br><span class="hljs-keyword">typedef</span> pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; pii;<br><span class="hljs-keyword">typedef</span> pair&lt;ll, ll&gt; pll;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">998244353</span>;<br><span class="hljs-comment">// using i128=__int128_t;</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1010</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> iinf = <span class="hljs-number">1e9</span>;<br><span class="hljs-type">const</span> ll linf = <span class="hljs-number">1e18</span>;<br>vector&lt;<span class="hljs-type">int</span>&gt; d[N], g[N];<br>bitset&lt;N&gt; vis;<br><span class="hljs-type">int</span> fa[N], n, s, k;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> pre, <span class="hljs-type">int</span> dep)</span> </span>&#123;<br>  fa[x] = pre;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> y : g[x]) &#123;<br>    <span class="hljs-keyword">if</span> (y == pre) <span class="hljs-keyword">continue</span>;<br>    <span class="hljs-built_in">dfs</span>(y, x, dep + <span class="hljs-number">1</span>);<br>  &#125;<br>  <span class="hljs-keyword">if</span> (x != pre &amp;&amp; g[x].<span class="hljs-built_in">size</span>() == <span class="hljs-number">1</span>) d[dep].<span class="hljs-built_in">push_back</span>(x);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs2</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> pre, <span class="hljs-type">int</span> dep)</span> </span>&#123;<br>  <span class="hljs-keyword">if</span> (dep &gt; k) <span class="hljs-keyword">return</span>;<br>  vis[x] = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> y : g[x]) &#123;<br>    <span class="hljs-keyword">if</span> (y == pre) <span class="hljs-keyword">continue</span>;<br>    <span class="hljs-built_in">dfs2</span>(y, x, dep + <span class="hljs-number">1</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  cin &gt;&gt; n &gt;&gt; s &gt;&gt; k;<br>  vis = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) g[i].<span class="hljs-built_in">clear</span>();<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) d[i].<span class="hljs-built_in">clear</span>();<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; n; ++i) &#123;<br>    <span class="hljs-type">int</span> x, y;<br>    cin &gt;&gt; x &gt;&gt; y;<br>    g[x].<span class="hljs-built_in">push_back</span>(y);<br>    g[y].<span class="hljs-built_in">push_back</span>(x);<br>  &#125;<br>  <span class="hljs-built_in">dfs</span>(s, s, <span class="hljs-number">0</span>);<br>  <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n; i &gt; k; --i) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> x : d[i]) &#123;<br>      <span class="hljs-keyword">if</span> (vis[x]) <span class="hljs-keyword">continue</span>;<br>      <span class="hljs-type">int</span> y = x;<br>      ans++;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= k; ++i) y = fa[y];<br>      <span class="hljs-built_in">dfs2</span>(y, y, <span class="hljs-number">0</span>);<br>    &#125;<br>  &#125;<br>  cout &lt;&lt; ans &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">STDIO</span><span class="hljs-params">()</span> </span>&#123;<br>  ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>), cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>), cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-built_in">STDIO</span>();<br>  <span class="hljs-type">int</span> _ = <span class="hljs-number">1</span>;<br>  cin &gt;&gt; _;<br>  <span class="hljs-keyword">while</span> (_--) <span class="hljs-built_in">solve</span>();<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="20-Pie-实数二分"><a href="#20-Pie-实数二分" class="headerlink" title="20.Pie(实数二分)"></a>20.Pie(实数二分)</h2><p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/UVA12097">https://www.luogu.com.cn/problem/UVA12097</a></p>
<p>可用<code>const double Pi = acos(-1.0);</code>得到$\pi$的值。</p>
<p>代码</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">using</span> ll = <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-keyword">using</span> ull = <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> REP(i, n) for (int i = 1; i &lt;= (n); ++i)</span><br><span class="hljs-keyword">typedef</span> pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; pii;<br><span class="hljs-keyword">typedef</span> pair&lt;ll, ll&gt; pll;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">998244353</span>;<br><span class="hljs-comment">// using i128=__int128_t;</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">9</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> iinf = <span class="hljs-number">1e9</span>;<br><span class="hljs-type">const</span> ll linf = <span class="hljs-number">1e18</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">double</span> Pi = <span class="hljs-built_in">acos</span>(<span class="hljs-number">-1.0</span>);<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n, f;<br>  cin &gt;&gt; n &gt;&gt; f;<br>  f++;<br>  <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">r</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span></span>;<br>  <span class="hljs-built_in">REP</span>(i, n) cin &gt;&gt; r[i];<br>  <span class="hljs-keyword">auto</span> check = [&amp;](<span class="hljs-type">double</span> x) &#123;<br>    ll cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">REP</span>(i, n) &#123;<br>      <span class="hljs-type">double</span> S = Pi * r[i] * r[i];<br>      cnt += (ll)(S / x);<br>      <span class="hljs-keyword">if</span> (cnt &gt;= f) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  &#125;;<br>  <span class="hljs-type">double</span> L = <span class="hljs-number">0</span>, R = <span class="hljs-number">1e17</span>;<br>  <span class="hljs-keyword">while</span> (R - L &gt; <span class="hljs-number">1e-6</span>) &#123;<br>    <span class="hljs-type">double</span> mid = (R + L) / <span class="hljs-number">2.0</span>;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(mid)) &#123;<br>      L = mid;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      R = mid;<br>    &#125;<br>  &#125;<br>  cout &lt;&lt; fixed &lt;&lt; <span class="hljs-built_in">setprecision</span>(<span class="hljs-number">6</span>) &lt;&lt; L &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">STDIO</span><span class="hljs-params">()</span> </span>&#123;<br>  ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>), cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>), cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-built_in">STDIO</span>();<br>  <span class="hljs-type">int</span> _ = <span class="hljs-number">1</span>;<br>  cin &gt;&gt; _;<br>  <span class="hljs-keyword">while</span> (_--) <span class="hljs-built_in">solve</span>();<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="21-Beijing-Guards-贪心-二分-数学"><a href="#21-Beijing-Guards-贪心-二分-数学" class="headerlink" title="21.Beijing Guards(贪心+二分/数学)"></a>21.Beijing Guards(贪心+二分/数学)</h2><p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/UVA1335">https://www.luogu.com.cn/problem/UVA1335</a></p>
<h3 id="法一-2"><a href="#法一-2" class="headerlink" title="法一"></a>法一</h3><p>假设有$x$个礼物，如何才能避免相邻重复呢。一种策略是一个从前往后拿，一个从后往前拿。</p>
<p>当偶数个人时，显然奇数从前往后，偶数从后往前拿即可。</p>
<p>我们假设第一个人从前往后拿。那么第二个人应该尽量从后往前拿。所以我从第二个人开始从前往后拿，交替进行。</p>
<p>偶数正确性显然。</p>
<p>奇数时有，最后一个应尽可能从后往前拿，即少拿前面的，那么这要求前一个尽量拿前面的，这样递推下去，即证。</p>
<p>注意特判<code>n==0</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">using</span> ll = <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-keyword">using</span> ull = <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> REP(i, n) for (int i = 1; i &lt;= (n); ++i)</span><br><span class="hljs-keyword">typedef</span> pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; pii;<br><span class="hljs-keyword">typedef</span> pair&lt;ll, ll&gt; pll;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">998244353</span>;<br><span class="hljs-comment">// using i128=__int128_t;</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">9</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> iinf = <span class="hljs-number">1e9</span>;<br><span class="hljs-type">const</span> ll linf = <span class="hljs-number">1e18</span>;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n;<br>  <span class="hljs-keyword">while</span> (cin &gt;&gt; n &amp;&amp; n) &#123;<br>    <span class="hljs-comment">// d-&gt;[1,r1]</span><br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">r</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span>, <span class="hljs-title">u</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span>, <span class="hljs-title">d</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span></span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) cin &gt;&gt; r[i];<br>    d[<span class="hljs-number">1</span>] = r[<span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">auto</span> check = [&amp;](<span class="hljs-type">int</span> x) &#123;<br>      <span class="hljs-keyword">if</span> (x &lt; r[<span class="hljs-number">1</span>]) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>      <span class="hljs-type">int</span> a = r[<span class="hljs-number">1</span>], b = x - r[<span class="hljs-number">1</span>];<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; ++i) u[i] = d[i] = <span class="hljs-number">0</span>;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; ++i) &#123;<br>        <span class="hljs-keyword">if</span> (i &amp; <span class="hljs-number">1</span>) &#123;<br>          u[i] = <span class="hljs-built_in">min</span>(b - u[i - <span class="hljs-number">1</span>], r[i]);<br>          d[i] = <span class="hljs-built_in">min</span>(r[i] - u[i], a - d[i - <span class="hljs-number">1</span>]);<br>          <span class="hljs-keyword">if</span> (u[i] + d[i] &lt; r[i]) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          d[i] = <span class="hljs-built_in">min</span>(r[i], a - d[i - <span class="hljs-number">1</span>]);<br>          u[i] = <span class="hljs-built_in">min</span>(b - u[i - <span class="hljs-number">1</span>], r[i] - d[i]);<br>          <span class="hljs-keyword">if</span> (u[i] + d[i] &lt; r[i]) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>      &#125;<br>      <span class="hljs-keyword">return</span> d[n] == <span class="hljs-number">0</span>;<br>    &#125;;<br>    <span class="hljs-keyword">if</span> (n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) &#123;<br>      <span class="hljs-type">int</span> ans = r[<span class="hljs-number">1</span>] + r[n];<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; n; ++i) ans = <span class="hljs-built_in">max</span>(ans, r[i] + r[i + <span class="hljs-number">1</span>]);<br>      cout &lt;&lt; ans &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>      <span class="hljs-keyword">continue</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>) &#123;<br>      cout &lt;&lt; r[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>      <span class="hljs-keyword">continue</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> L = <span class="hljs-number">0</span>, R = <span class="hljs-number">1e9</span>;<br>    <span class="hljs-keyword">while</span> (L + <span class="hljs-number">1</span> != R) &#123;<br>      <span class="hljs-type">int</span> mid = L + R &gt;&gt; <span class="hljs-number">1</span>;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(mid)) &#123;<br>        R = mid;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        L = mid;<br>      &#125;<br>    &#125;<br>    cout &lt;&lt; R &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">STDIO</span><span class="hljs-params">()</span> </span>&#123;<br>  ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>), cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>), cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-built_in">STDIO</span>();<br>  <span class="hljs-type">int</span> _ = <span class="hljs-number">1</span>;<br>  <span class="hljs-comment">// cin &gt;&gt; _;</span><br>  <span class="hljs-keyword">while</span> (_--) <span class="hljs-built_in">solve</span>();<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="法二-2"><a href="#法二-2" class="headerlink" title="法二"></a>法二</h3><p>基于第一种方法的策略。如果你注意力再强一点。可以注意到：</p>
<p>答案为</p>
<script type="math/tex; mode=display">
A=\max\left(\max_{i=1}^{n-1}(r_i+r_{i+1}),r_1+r_n, \left\lceil \frac{\sum r_i }{\lfloor \frac{n}{2} \rfloor} \right \rceil \right )</script><p>重点是</p>
<script type="math/tex; mode=display">
A\ge\left\lceil \frac{\sum r_i }{\lfloor \frac{n}{2} \rfloor} \right \rceil\quad\quad\quad (*)</script><p>假设已经满足前面的式子。</p>
<blockquote>
<p>偶数显然，仅考虑奇数情形。</p>
</blockquote>
<p>我们证明满足要求的充要条件是（*）式。</p>
<p><strong>必要性</strong>：设有$x$种，每一种最多被$\lfloor \frac{n}{2} \rfloor$个人 共有，于是</p>
<script type="math/tex; mode=display">
x\left\lfloor \frac{n}{2} \right \rfloor\ge \sum r_i</script><p><strong>充分性</strong> ：由于对称性，我们可以<strong>假设$r_1$最大</strong>。设$f_i$为第$i$个人的礼物与$r_1$的交集。有递推关系：</p>
<p>$f_1=r_1,f_2=0$</p>
<script type="math/tex; mode=display">
f_{2k}=\min(r_{2k},r_1-f_{2k-1})</script><script type="math/tex; mode=display">
f_{2k+1}=\max(0,r_{2k}+r_{2k+1}+r_1-A-f_{2k})</script><p>若$r_{2k}\le r_1-f_{2k-1}$：</p>
<p>那么有$f_{2k}=r_{2k}$，将$f_{2k+1}$带入$f_{2k+2}$有：</p>
<script type="math/tex; mode=display">
\begin{aligned}
f_{2k+2}&=\min(r_{2k+2},\min(r_{1},A+f_{2k}-r_{2k}-r_{2k+1}))\\
&=\min(r_{2k+2},A-r_{2k+1})\\
&=r_{2k+2}
\end{aligned}</script><blockquote>
<p>这说明，若$f_{2k+2}\neq r_{2k+2}$，那么$f_{2k}\neq r_{2k}$。</p>
</blockquote>
<p>否则：$f_{2k}=r_1-f_{2k-1}$，带入有</p>
<script type="math/tex; mode=display">
\begin{aligned}
f_{2k+1}&=\max(0,r_{2k}+r_{2k+1}+f_{2k-1}-A)\\
&=\max(0,r_{2k+1}+r_{2k}+\max(0,r_{2k-1}+r_{2k-2}+f_{2k-3}-A) -A)\\
&=\max(0,r_{2k+1}+r_{2k}-A,r_{2k+1}+r_{2k}+r_{2k-1}+r_{2k-2}+f_{2k-3}-2A)\\
&=\max(0,r_{2k+1}+r_{2k}+r_{2k-1}+r_{2k-2}+f_{2k-3}-2A)
\end{aligned}</script><p>一直递推下去，显然有</p>
<script type="math/tex; mode=display">
f_{2k+1}=\max(0,\sum_{i=2}^{2k+1}+r_1-kA)</script><p>不妨设$n=2t+1$，</p>
<p>若$f_{2t}=r_{2t}$，显然成立。</p>
<p>否则</p>
<script type="math/tex; mode=display">
f_n=\max(0,\sum_{i=1}^{n}r_i-\left\lfloor \frac{n}{2} \right \rfloor A )=0</script><p>证毕。</p>
<h3 id="法三"><a href="#法三" class="headerlink" title="法三"></a>法三</h3><p>如果你没有那么强的注意力，并且没想到贪心策略。</p>
<p>我们可以设$mx_i$$mi_i$分别为第$i$个人礼物与第一个的最大，最小交集。显然有递推公式</p>
<script type="math/tex; mode=display">
mx_i=\min(r_i,r_{1}-mi_{i-1})</script><script type="math/tex; mode=display">
mi_i=\max(0,r_1+r_i+r_{i-1}-mx_{i-1}-A)</script><p>我们需要$mi_n=0$，注意到满足单调性，二分即可。</p>
<p><strong>代码</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">using</span> ll = <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-keyword">using</span> ull = <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> REP(i, n) for (int i = 1; i &lt;= (n); ++i)</span><br><span class="hljs-keyword">typedef</span> pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; pii;<br><span class="hljs-keyword">typedef</span> pair&lt;ll, ll&gt; pll;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">998244353</span>;<br><span class="hljs-comment">// using i128=__int128_t;</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">9</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> iinf = <span class="hljs-number">1e9</span>;<br><span class="hljs-type">const</span> ll linf = <span class="hljs-number">1e18</span>;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n;<br>  <span class="hljs-keyword">while</span> (cin &gt;&gt; n &amp;&amp; n) &#123;<br>    <span class="hljs-type">int</span> L = <span class="hljs-number">0</span>, R = <span class="hljs-number">1e9</span>;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">r</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span>, <span class="hljs-title">mi</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span>, <span class="hljs-title">mx</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span></span>;<br>    <span class="hljs-built_in">REP</span>(i, n) cin &gt;&gt; r[i];<br>    mi[<span class="hljs-number">1</span>] = mx[<span class="hljs-number">1</span>] = r[<span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>) &#123;<br>      cout &lt;&lt; r[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>      <span class="hljs-keyword">continue</span>;<br>    &#125;<br>    <span class="hljs-built_in">REP</span>(i, n) L = <span class="hljs-built_in">max</span>(L, r[i] + r[i % n + <span class="hljs-number">1</span>]);<br>    <span class="hljs-keyword">auto</span> check = [&amp;](<span class="hljs-type">int</span> x) &#123;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; ++i) &#123;<br>        mx[i] = <span class="hljs-built_in">min</span>(r[i], r[<span class="hljs-number">1</span>] - mi[i - <span class="hljs-number">1</span>]);<br>        mi[i] = <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, r[<span class="hljs-number">1</span>] + r[i] + r[i - <span class="hljs-number">1</span>] - mx[i - <span class="hljs-number">1</span>] - x);<br>      &#125;<br>      <span class="hljs-keyword">return</span> mi[n] == <span class="hljs-number">0</span>;<br>    &#125;;<br>    <span class="hljs-keyword">while</span> (L + <span class="hljs-number">1</span> != R) &#123;<br>      <span class="hljs-type">int</span> mid = L + R &gt;&gt; <span class="hljs-number">1</span>;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(mid)) &#123;<br>        R = mid;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        L = mid;<br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(L)) R = L;<br>    cout &lt;&lt; R &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">STDIO</span><span class="hljs-params">()</span> </span>&#123;<br>  ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>), cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>), cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-built_in">STDIO</span>();<br>  <span class="hljs-type">int</span> _ = <span class="hljs-number">1</span>;<br>  <span class="hljs-comment">// cin &gt;&gt; _;</span><br>  <span class="hljs-keyword">while</span> (_--) <span class="hljs-built_in">solve</span>();<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="22-Calculator-Conundrum-floyd-判圈"><a href="#22-Calculator-Conundrum-floyd-判圈" class="headerlink" title="22 .Calculator Conundrum(floyd 判圈)"></a>22 .Calculator Conundrum(floyd 判圈)</h2><p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/UVA11549">https://www.luogu.com.cn/problem/UVA11549</a></p>
<p>用<code>set</code>，直接暴力显然可做。但空间复杂度过高。</p>
<p>事实上，我们知道一定会循环，于是利用Floyd判圈法即可。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n, k;<br>  cin &gt;&gt; n &gt;&gt; k;<br>  <span class="hljs-keyword">auto</span> nex = [&amp;](<span class="hljs-type">int</span> x) -&gt; <span class="hljs-type">int</span> &#123;<br>    ll res = <span class="hljs-number">1ll</span> * x * x;<br>    <span class="hljs-type">int</span> b[<span class="hljs-number">20</span>], h = <span class="hljs-number">0</span>, p;<br>    <span class="hljs-keyword">while</span> (res) b[++h] = res % <span class="hljs-number">10</span>, res /= <span class="hljs-number">10</span>;<br>    p = <span class="hljs-built_in">min</span>(h, n);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= p; ++i) res = res * <span class="hljs-number">10</span> + b[h--];<br>    <span class="hljs-keyword">return</span> res;<br>  &#125;;<br>  <span class="hljs-type">int</span> p1 = k, p2 = k, ans = k;<br>  <span class="hljs-keyword">do</span> &#123;<br>    p1 = <span class="hljs-built_in">nex</span>(p1);<br>    p2 = <span class="hljs-built_in">nex</span>(p2), ans = <span class="hljs-built_in">max</span>(ans, p2);<br>    p2 = <span class="hljs-built_in">nex</span>(p2), ans = <span class="hljs-built_in">max</span>(ans, p2);<br>  &#125; <span class="hljs-keyword">while</span> (p1 != p2);<br>  cout &lt;&lt; ans &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="23-Meteor-扫描线"><a href="#23-Meteor-扫描线" class="headerlink" title="23.Meteor(扫描线)"></a>23.Meteor(扫描线)</h2><p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/UVA1398">https://www.luogu.com.cn/problem/UVA1398</a></p>
<p>计算每个点在框里的时间。然后就比较典了。可以直接离散化线段树做。</p>
<p>但用扫描线更简单。下面是扫描线代码。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span> &#123;<br>  <span class="hljs-type">double</span> x;<br>  <span class="hljs-type">int</span> ty;<br>  <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-type">const</span> node u) <span class="hljs-type">const</span> &#123; <span class="hljs-keyword">return</span> x == u.x ? ty &lt; u.ty : x &lt; u.x; &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> h, w, n;<br>  cin &gt;&gt; w &gt;&gt; h &gt;&gt; n;<br>  <span class="hljs-keyword">auto</span> cal = [&amp;](<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> v, <span class="hljs-type">int</span> e, <span class="hljs-type">double</span>&amp; L, <span class="hljs-type">double</span>&amp; R) &#123;<br>    <span class="hljs-keyword">if</span> (v == <span class="hljs-number">0</span>) &#123;<br>      <span class="hljs-keyword">if</span> (x &lt;= <span class="hljs-number">0</span> || x &gt;= e) R = L - <span class="hljs-number">1</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (v &gt; <span class="hljs-number">0</span>) &#123;<br>      L = <span class="hljs-built_in">max</span>(L, -(<span class="hljs-type">double</span>)(x) / v);<br>      R = <span class="hljs-built_in">min</span>(R, (<span class="hljs-type">double</span>)(e - x) / v);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      L = <span class="hljs-built_in">max</span>(L, (<span class="hljs-type">double</span>)(e - x) / v);<br>      R = <span class="hljs-built_in">min</span>(R, -(<span class="hljs-type">double</span>)(x) / v);<br>    &#125;<br>  &#125;;<br>  vector&lt;node&gt; e;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>    <span class="hljs-type">int</span> x, y, a, b;<br>    cin &gt;&gt; x &gt;&gt; y &gt;&gt; a &gt;&gt; b;<br>    <span class="hljs-type">double</span> L = <span class="hljs-number">0</span>, R = <span class="hljs-number">1e9</span>;<br>    <span class="hljs-built_in">cal</span>(x, a, w, L, R);<br>    <span class="hljs-built_in">cal</span>(y, b, h, L, R);<br>    <span class="hljs-keyword">if</span> (L &lt; R) &#123;<br>      e.<span class="hljs-built_in">push_back</span>(&#123;L, <span class="hljs-number">1</span>&#125;);<br>      e.<span class="hljs-built_in">push_back</span>(&#123;R, <span class="hljs-number">-1</span>&#125;);<br>    &#125;<br>  &#125;<br>  <span class="hljs-built_in">sort</span>(e.<span class="hljs-built_in">begin</span>(), e.<span class="hljs-built_in">end</span>());<br>  <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>, cur = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; [x, y] : e) &#123;<br>    <span class="hljs-comment">// cout &lt;&lt; x &lt;&lt; &quot; &quot; &lt;&lt; y &lt;&lt; &quot;\n&quot;;</span><br>    cur += y;<br>    ans = <span class="hljs-built_in">max</span>(cur, ans);<br>  &#125;<br>  cout &lt;&lt; ans &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="24-City-Game（扫描线-dP）"><a href="#24-City-Game（扫描线-dP）" class="headerlink" title="24.City Game（扫描线 dP）"></a>24.City Game（扫描线 dP）</h2><p><a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/problem/51000">https://ac.nowcoder.com/acm/problem/51000</a></p>
<p>我们将连续的空格看成一条线，维护三个信息，$(i,j)$向上的最大高度，以及这个 长度最多向左，右移动的位置。可以证明答案一定在这之中。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> a[N][N], le[N][N], L[N][N], R[N][N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n, m;<br>  cin &gt;&gt; n &gt;&gt; m;<br>  <span class="hljs-built_in">REP</span>(i, n) <span class="hljs-built_in">REP</span>(j, m) &#123;<br>    <span class="hljs-type">char</span> x;<br>    cin &gt;&gt; x;<br>    a[i][j] = (x == <span class="hljs-string">&#x27;F&#x27;</span>);<br>  &#125;<br>  <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>    <span class="hljs-type">int</span> p = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; ++j) &#123;<br>      <span class="hljs-keyword">if</span> (a[i][j]) &#123;<br>        le[i][j] = le[i - <span class="hljs-number">1</span>][j] + <span class="hljs-number">1</span>;<br>        L[i][j] = <span class="hljs-built_in">max</span>(p + <span class="hljs-number">1</span>, L[i - <span class="hljs-number">1</span>][j]);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        p = j;<br>      &#125;<br>    &#125;<br>    p = m + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = m; j &gt;= <span class="hljs-number">1</span>; --j) &#123;<br>      <span class="hljs-keyword">if</span> (a[i][j]) &#123;<br>        R[i][j] = <span class="hljs-built_in">min</span>(p - <span class="hljs-number">1</span>, R[i - <span class="hljs-number">1</span>][j] == <span class="hljs-number">0</span> ? m + <span class="hljs-number">1</span> : R[i - <span class="hljs-number">1</span>][j]);<br>        ans = <span class="hljs-built_in">max</span>(ans, le[i][j] * (R[i][j] - L[i][j] + <span class="hljs-number">1</span>));<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        p = j;<br>      &#125;<br>    &#125;<br>  &#125;<br>  cout &lt;&lt; ans * <span class="hljs-number">3</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="25-C2-Adjust-The-Presentation-Hard-Version"><a href="#25-C2-Adjust-The-Presentation-Hard-Version" class="headerlink" title="25.C2. Adjust The Presentation (Hard Version)"></a>25.C2. Adjust The Presentation (Hard Version)</h2><p><a target="_blank" rel="noopener" href="https://codeforces.com/contest/2021/problem/C2">https://codeforces.com/contest/2021/problem/C2</a></p>
<p>维护每个数在b首次出现的位置，需要满足第一个为1，且递增排序。我们改变一个值，只会形象左右两边的数。用map存一下即可。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n, m, q;<br>  cin &gt;&gt; n &gt;&gt; m &gt;&gt; q;<br>  <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">a</span><span class="hljs-params">(n + <span class="hljs-number">10</span>)</span>, <span class="hljs-title">b</span><span class="hljs-params">(m + <span class="hljs-number">10</span>)</span>, <span class="hljs-title">pos</span><span class="hljs-params">(n + <span class="hljs-number">10</span>)</span></span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) cin &gt;&gt; a[i], pos[a[i]] = i;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; ++i) cin &gt;&gt; b[i];<br>  <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>  vector&lt;set&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">st</span>(n + <span class="hljs-number">1</span>);<br>  map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; f;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; ++i) st[b[i]].<span class="hljs-built_in">insert</span>(i);<br>  <span class="hljs-keyword">auto</span> insert = [&amp;](<span class="hljs-type">int</span> i) &#123;<br>    <span class="hljs-keyword">auto</span> [it, y] = f.<span class="hljs-built_in">emplace</span>(i, b[i]);<br>    <span class="hljs-keyword">if</span> (!y) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">auto</span> r = <span class="hljs-built_in">next</span>(it);<br>    <span class="hljs-keyword">if</span> (r != f.<span class="hljs-built_in">end</span>()) cnt += (pos[b[i]] + <span class="hljs-number">1</span> != pos[r-&gt;second]);<br>    <span class="hljs-keyword">if</span> (it != f.<span class="hljs-built_in">begin</span>()) &#123;<br>      <span class="hljs-keyword">auto</span> l = <span class="hljs-built_in">prev</span>(it);<br>      cnt += (pos[b[i]] - <span class="hljs-number">1</span> != pos[l-&gt;second]);<br>      <span class="hljs-keyword">if</span> (r != f.<span class="hljs-built_in">end</span>()) &#123;<br>        cnt -= (pos[l-&gt;second] + <span class="hljs-number">1</span> != pos[r-&gt;second]);<br>      &#125;<br>    &#125;<br>  &#125;;<br>  <span class="hljs-keyword">auto</span> erase = [&amp;](<span class="hljs-type">int</span> i) &#123;<br>    <span class="hljs-keyword">auto</span> it = f.<span class="hljs-built_in">find</span>(i);<br>    <span class="hljs-keyword">if</span> (it == f.<span class="hljs-built_in">end</span>()) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">auto</span> r = <span class="hljs-built_in">next</span>(it);<br>    <span class="hljs-keyword">if</span> (r != f.<span class="hljs-built_in">end</span>()) cnt -= (pos[b[i]] + <span class="hljs-number">1</span> != pos[r-&gt;second]);<br>    <span class="hljs-keyword">if</span> (it != f.<span class="hljs-built_in">begin</span>()) &#123;<br>      <span class="hljs-keyword">auto</span> l = <span class="hljs-built_in">prev</span>(it);<br>      cnt -= (pos[b[i]] - <span class="hljs-number">1</span> != pos[l-&gt;second]);<br>      <span class="hljs-keyword">if</span> (r != f.<span class="hljs-built_in">end</span>()) &#123;<br>        cnt += (pos[l-&gt;second] + <span class="hljs-number">1</span> != pos[r-&gt;second]);<br>      &#125;<br>    &#125;<br>    f.<span class="hljs-built_in">erase</span>(it);<br>  &#125;;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>    <span class="hljs-keyword">if</span> (st[i].<span class="hljs-built_in">size</span>()) <span class="hljs-built_in">insert</span>(*st[i].<span class="hljs-built_in">begin</span>());<br>  &#125;<br>  <span class="hljs-keyword">if</span> (cnt || f.<span class="hljs-built_in">begin</span>()-&gt;second != a[<span class="hljs-number">1</span>]) &#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;TIDAK\n&quot;</span>;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;YA\n&quot;</span>;<br>  &#125;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= q; ++i) &#123;<br>    <span class="hljs-type">int</span> x, t;<br>    cin &gt;&gt; x &gt;&gt; t;<br>    <span class="hljs-keyword">if</span> (b[x] != t) &#123;<br>      st[b[x]].<span class="hljs-built_in">erase</span>(x);<br>      <span class="hljs-built_in">erase</span>(x);<br>      <span class="hljs-keyword">if</span> (st[b[x]].<span class="hljs-built_in">size</span>()) <span class="hljs-built_in">insert</span>(*st[b[x]].<span class="hljs-built_in">begin</span>());<br>      <span class="hljs-keyword">if</span> (st[t].<span class="hljs-built_in">size</span>()) <span class="hljs-built_in">erase</span>(*st[t].<span class="hljs-built_in">begin</span>());<br>      b[x] = t;<br>      st[t].<span class="hljs-built_in">insert</span>(x);<br>      <span class="hljs-built_in">insert</span>(*st[t].<span class="hljs-built_in">begin</span>());<br>    &#125;<br>    <span class="hljs-keyword">if</span> (cnt || f.<span class="hljs-built_in">begin</span>()-&gt;second != a[<span class="hljs-number">1</span>]) &#123;<br>      cout &lt;&lt; <span class="hljs-string">&quot;TIDAK\n&quot;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      cout &lt;&lt; <span class="hljs-string">&quot;YA\n&quot;</span>;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="26-3-Team-Division"><a href="#26-3-Team-Division" class="headerlink" title="26.3 Team Division"></a>26.<strong>3 Team Division</strong></h2><p><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc375/tasks/abc375_e">https://atcoder.jp/contests/abc375/tasks/abc375_e</a></p>
<p>DP</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> f[<span class="hljs-number">110</span>][<span class="hljs-number">510</span>][<span class="hljs-number">510</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n, ex = <span class="hljs-number">0</span>;<br>  cin &gt;&gt; n;<br>  <span class="hljs-function">vector&lt;pii&gt; <span class="hljs-title">a</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span></span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>    cin &gt;&gt; a[i].first &gt;&gt; a[i].second;<br>    ex += a[i].second;<br>  &#125;<br>  <span class="hljs-keyword">if</span> (ex % <span class="hljs-number">3</span>) &#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;-1&quot;</span>;<br>    <span class="hljs-keyword">return</span>;<br>  &#125;<br>  ex /= <span class="hljs-number">3</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= n; ++i) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= ex; ++j) &#123;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt;= ex; ++k) &#123;<br>        f[i][j][k] = iinf;<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// f[i][j][k], 到i，1有j，2有k，的最小次数。</span><br>  f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>  <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>    sum += a[i].second;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> x = <span class="hljs-number">0</span>; x &lt;= ex; ++x) &#123;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y = <span class="hljs-number">0</span>; y &lt;= ex; ++y) &#123;<br>        <span class="hljs-type">int</span> z = sum - x - y;<br>        <span class="hljs-keyword">if</span> (z &gt; ex || z &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">continue</span>;<br>        <span class="hljs-keyword">if</span> (y &gt;= a[i].second) f[i][x][y] = <span class="hljs-built_in">min</span>(f[i][x][y], f[i - <span class="hljs-number">1</span>][x][y - a[i].second] + (a[i].first != <span class="hljs-number">2</span>));<br>        <span class="hljs-keyword">if</span> (x &gt;= a[i].second) f[i][x][y] = <span class="hljs-built_in">min</span>(f[i][x][y], f[i - <span class="hljs-number">1</span>][x - a[i].second][y] + (a[i].first != <span class="hljs-number">1</span>));<br>        <span class="hljs-keyword">if</span> (z &gt;= a[i].second) f[i][x][y] = <span class="hljs-built_in">min</span>(f[i][x][y], f[i - <span class="hljs-number">1</span>][x][y] + (a[i].first != <span class="hljs-number">3</span>));<br>      &#125;<br>    &#125;<br>  &#125;<br>  cout &lt;&lt; (f[n][ex][ex] &gt; n ? <span class="hljs-number">-1</span> : f[n][ex][ex]);<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="27-C-Alya-and-Permutation"><a href="#27-C-Alya-and-Permutation" class="headerlink" title="27.C. Alya and Permutation"></a>27.C. Alya and Permutation</h2><p><a target="_blank" rel="noopener" href="https://codeforces.com/contest/2035/problem/C">https://codeforces.com/contest/2035/problem/C</a></p>
<p>贪心</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">lb</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123; <span class="hljs-keyword">return</span> n &amp; (-n); &#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n;<br>  cin &gt;&gt; n;<br>  <span class="hljs-keyword">if</span> (n &amp; <span class="hljs-number">1</span>) &#123;<br>    <span class="hljs-comment">//.....1&amp;3|n-1&amp;n</span><br>    cout &lt;&lt; n &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>      <span class="hljs-keyword">if</span> (i == <span class="hljs-number">1</span> || i == <span class="hljs-number">3</span> || i == n - <span class="hljs-number">1</span> || i == n) <span class="hljs-keyword">continue</span>;<br>      cout &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; <span class="hljs-number">3</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; n - <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; n &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-type">int</span> h = n, cnt = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (h &gt; <span class="hljs-number">1</span>) &#123;<br>      h &gt;&gt;= <span class="hljs-number">1</span>;<br>      cnt &lt;&lt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    h *= cnt;<br>    cout &lt;&lt; <span class="hljs-number">2</span> * h - <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    <span class="hljs-keyword">if</span> (n == h) &#123;<br>      <span class="hljs-comment">// 3&amp;1|n-2&amp;n-1|n</span><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>        <span class="hljs-keyword">if</span> (i == <span class="hljs-number">1</span> || i == <span class="hljs-number">3</span> || i == n - <span class="hljs-number">2</span> || i == n - <span class="hljs-number">1</span> || i == n) <span class="hljs-keyword">continue</span>;<br>        cout &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>      &#125;<br>      cout &lt;&lt; <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; <span class="hljs-number">3</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; n - <span class="hljs-number">2</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; n - <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; n &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-comment">// 6</span><br>      <span class="hljs-comment">// |n-1&amp;1|h-2&amp;h-1|h</span><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>        <span class="hljs-keyword">if</span> (i == n - <span class="hljs-number">1</span> || i == <span class="hljs-number">1</span> || i == h - <span class="hljs-number">2</span> || i == h - <span class="hljs-number">1</span> || i == h) <span class="hljs-keyword">continue</span>;<br>        cout &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>      &#125;<br>      cout &lt;&lt; n - <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; h - <span class="hljs-number">2</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; h - <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; h &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h2 id="28-D-Yet-Another-Real-Number-Problem"><a href="#28-D-Yet-Another-Real-Number-Problem" class="headerlink" title="28.D. Yet Another Real Number Problem"></a>28.D. Yet Another Real Number Problem</h2><p><a target="_blank" rel="noopener" href="https://codeforces.com/contest/2035/problem/D">https://codeforces.com/contest/2035/problem/D</a></p>
<p>单调栈，贪心</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n;<br>  cin &gt;&gt; n;<br>  vector&lt;pll&gt; stk;<br>  ll sum = <span class="hljs-number">0</span>, a, r;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>    ll cnt = <span class="hljs-number">0</span>;<br>    cin &gt;&gt; a;<br>    <span class="hljs-keyword">while</span> (a % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) &#123;<br>      a &gt;&gt;= <span class="hljs-number">1</span>;<br>      cnt++;<br>    &#125;<br>    <span class="hljs-keyword">while</span> (stk.<span class="hljs-built_in">size</span>() &amp;&amp; (cnt &gt;= <span class="hljs-number">30</span> || stk.<span class="hljs-built_in">back</span>().first &lt;= (a &lt;&lt; cnt))) &#123;<br>      sum += stk.<span class="hljs-built_in">back</span>().first;<br>      cnt += stk.<span class="hljs-built_in">back</span>().second;<br>      stk.<span class="hljs-built_in">pop_back</span>();<br>    &#125;<br>    <span class="hljs-keyword">if</span> (cnt) &#123;<br>      stk.<span class="hljs-built_in">push_back</span>(&#123;a, cnt&#125;);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      sum += a;<br>    &#125;<br>    ll ans = sum % mod;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; [x, y] : stk) ans = (ans + <span class="hljs-built_in">qpow</span>(<span class="hljs-number">2</span>, y, mod) * x % mod) % mod;<br>    cout &lt;&lt; ans &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>  &#125;<br>  cout &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="29-E-Sensor-Optimization-Dilemma-2"><a href="#29-E-Sensor-Optimization-Dilemma-2" class="headerlink" title="29.E - Sensor Optimization Dilemma 2"></a>29.<strong>E - Sensor Optimization Dilemma 2</strong></h2><p><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc374/tasks/abc374_e">https://atcoder.jp/contests/abc374/tasks/abc374_e</a></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  ll n, m;<br>  cin &gt;&gt; n &gt;&gt; m;<br>  <span class="hljs-function">vector&lt;ll&gt; <span class="hljs-title">a</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span>, <span class="hljs-title">b</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span>, <span class="hljs-title">p</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span>, <span class="hljs-title">q</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span></span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>    cin &gt;&gt; a[i] &gt;&gt; p[i] &gt;&gt; b[i] &gt;&gt; q[i];<br>    <span class="hljs-keyword">if</span> (b[i] * p[i] &gt; a[i] * q[i]) &#123;<br>      <span class="hljs-built_in">swap</span>(a[i], b[i]), <span class="hljs-built_in">swap</span>(p[i], q[i]);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">auto</span> check = [&amp;](ll x) &#123;<br>    ll sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>      <span class="hljs-comment">// ll t = a[i] * b[i];</span><br>      <span class="hljs-comment">// ll k = x / t, r = x % t;</span><br>      <span class="hljs-comment">// sum += k * b[i] * p[i];</span><br>      ll cnt = <span class="hljs-number">4e18</span>;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= b[i]; ++j) cnt = <span class="hljs-built_in">min</span>(cnt, j * <span class="hljs-number">1ll</span> * p[i] + ((<span class="hljs-built_in">max</span>(<span class="hljs-number">0ll</span>, x - j * a[i]) + b[i] - <span class="hljs-number">1</span>) / b[i]) * q[i]);<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= a[i]; ++j) cnt = <span class="hljs-built_in">min</span>(cnt, j * <span class="hljs-number">1ll</span> * q[i] + ((<span class="hljs-built_in">max</span>(<span class="hljs-number">0ll</span>, x - j * b[i]) + a[i] - <span class="hljs-number">1</span>) / a[i]) * p[i]);<br>      sum += cnt;<br>      <span class="hljs-keyword">if</span> (sum &gt; m) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> sum &lt;= m;<br>  &#125;;<br>  ll L = <span class="hljs-number">0</span>, R = <span class="hljs-number">1e9</span> + <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">while</span> (L + <span class="hljs-number">1</span> != R) &#123;<br>    ll mid = L + R &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(mid)) &#123;<br>      L = mid;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      R = mid;<br>    &#125;<br>  &#125;<br>  cout &lt;&lt; L &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="30-D-Penchick-and-Desert-Rabbit"><a href="#30-D-Penchick-and-Desert-Rabbit" class="headerlink" title="30.D. Penchick and Desert Rabbit"></a>30.D. Penchick and Desert Rabbit</h2><p><a target="_blank" rel="noopener" href="https://codeforces.com/contest/2031/problem/D">https://codeforces.com/contest/2031/problem/D</a></p>
<h2 id="31-D-Cool-Graph-构造"><a href="#31-D-Cool-Graph-构造" class="headerlink" title="31.D. Cool Graph(构造)"></a>31.D. Cool Graph(构造)</h2><p><a target="_blank" rel="noopener" href="https://codeforces.com/problemset/problem/2029/D">https://codeforces.com/problemset/problem/2029/D</a></p>
<p>肯定是变成一颗树简单一点。注意到如果每一个连通块只有1个或2个点，就很简单了。</p>
<p>对一个点度数大于1进行操作。将其度数减小到1或0。</p>
<h2 id="32-E-Coloring-Game（二分图，构造）"><a href="#32-E-Coloring-Game（二分图，构造）" class="headerlink" title="32.E. Coloring Game（二分图，构造）"></a>32.E. Coloring Game（二分图，构造）</h2><p><a target="_blank" rel="noopener" href="https://codeforces.com/problemset/problem/1991/E">https://codeforces.com/problemset/problem/1991/E</a></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs cpp">vector&lt;<span class="hljs-type">int</span>&gt; g[N];<br><span class="hljs-type">int</span> col[N];<br><span class="hljs-comment">// 二分图判定</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; y : g[x]) &#123;<br>    <span class="hljs-keyword">if</span> (col[y] == col[x]) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">if</span> (col[y] != <span class="hljs-number">-1</span>) <span class="hljs-keyword">continue</span>;<br>    col[y] = col[x] ^ <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">dfs</span>(y)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-type">int</span> n, m;<br>  cin &gt;&gt; n &gt;&gt; m;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) g[i].<span class="hljs-built_in">clear</span>();<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; ++i) &#123;<br>    <span class="hljs-type">int</span> x, y;<br>    cin &gt;&gt; x &gt;&gt; y;<br>    g[x].<span class="hljs-built_in">push_back</span>(y);<br>    g[y].<span class="hljs-built_in">push_back</span>(x);<br>  &#125;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) col[i] = <span class="hljs-number">-1</span>;<br>  col[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>)) &#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Alice&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>      cout &lt;&lt; <span class="hljs-string">&quot;1 2&quot;</span> &lt;&lt; endl;<br>      <span class="hljs-type">int</span> x, y;<br>      cin &gt;&gt; x &gt;&gt; y;<br>    &#125;<br>    <span class="hljs-keyword">return</span>;<br>  &#125;<br>  vector&lt;<span class="hljs-type">int</span>&gt; col1, col2;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>    <span class="hljs-keyword">if</span> (col[i]) &#123;<br>      col<span class="hljs-number">2.</span><span class="hljs-built_in">push_back</span>(i);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      col<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>  &#125;<br>  cout &lt;&lt; <span class="hljs-string">&quot;Bob&quot;</span> &lt;&lt; endl;<br>  <span class="hljs-keyword">while</span> (col<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>() || col<span class="hljs-number">2.</span><span class="hljs-built_in">size</span>()) &#123;<br>    <span class="hljs-type">int</span> x, y;<br>    cin &gt;&gt; x &gt;&gt; y;<br>    <span class="hljs-keyword">if</span> (x &gt; y) <span class="hljs-built_in">swap</span>(x, y);<br>    <span class="hljs-keyword">if</span> (col<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>() &amp;&amp; x == <span class="hljs-number">1</span>) &#123;<br>      cout &lt;&lt; col<span class="hljs-number">1.</span><span class="hljs-built_in">back</span>() &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; <span class="hljs-number">1</span> &lt;&lt; endl;<br>      col<span class="hljs-number">1.</span><span class="hljs-built_in">pop_back</span>();<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (col<span class="hljs-number">2.</span><span class="hljs-built_in">size</span>() &amp;&amp; (x == <span class="hljs-number">2</span> || y == <span class="hljs-number">2</span>)) &#123;<br>      cout &lt;&lt; col<span class="hljs-number">2.</span><span class="hljs-built_in">back</span>() &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; <span class="hljs-number">2</span> &lt;&lt; endl;<br>      col<span class="hljs-number">2.</span><span class="hljs-built_in">pop_back</span>();<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">if</span> (col<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>()) &#123;<br>        cout &lt;&lt; col<span class="hljs-number">1.</span><span class="hljs-built_in">back</span>() &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; <span class="hljs-number">3</span> &lt;&lt; endl;<br>        col<span class="hljs-number">1.</span><span class="hljs-built_in">pop_back</span>();<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        cout &lt;&lt; col<span class="hljs-number">2.</span><span class="hljs-built_in">back</span>() &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; <span class="hljs-number">3</span> &lt;&lt; endl;<br>        col<span class="hljs-number">2.</span><span class="hljs-built_in">pop_back</span>();<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="33-P1453-城市环路（基环树，DP）"><a href="#33-P1453-城市环路（基环树，DP）" class="headerlink" title="33.P1453 城市环路（基环树，DP）"></a>33.P1453 城市环路（基环树，DP）</h2><p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P1453">https://www.luogu.com.cn/problem/P1453</a></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/ACM/" class="print-no-link">#ACM</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>acm1600</div>
      <div>https://0d-00.github.io/2024/10/02/acm/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>0d-00</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年10月2日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/11/18/Cu/" title="Cu">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Cu</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/10/01/5thCombinatorics7/" title="5thCombinatorics7">
                        <span class="hidden-mobile">5thCombinatorics7</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
